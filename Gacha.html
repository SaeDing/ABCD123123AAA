<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>êµ°ë‹¨ì¥ ë½‘ê¸° ì‹œë®¬ë ˆì´í„°</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <style>
    :root {
      --primary-color: #007AFF;
      --secondary-color: #5AC8FA;
      --accent-color: #34C759;
      --text-light: #F8F9FA;
      --text-dark: #212529;
      --background-color: #121212;
      --card-bg: rgba(30, 30, 30, 0.8);
      --legendary-color: #FFD700;
      --epic-color: #9370DB;
      --rare-color: #4EA8DE;
      --uncommon-color: #60D394;
      --common-color: #A0A0A0;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', 'Apple SD Gothic Neo', sans-serif;
    }

    body {
      background-color: var(--background-color);
      color: var(--text-light);
      height: 100vh;
      width: 100vw;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      padding: 0;
      margin: 0;
      position: fixed;
      font-size: 14px; /* ê¸°ë³¸ í°íŠ¸ í¬ê¸° ì¡°ì • */
    }

    #app-container {
      position: relative;
      width: 100%;
      max-width: 500px;
      height: 100vh;
      max-height: 100vh;
      background-color: var(--card-bg);
      border-radius: 0;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    #app-background {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--secondary-color) 0%, var(--primary-color) 100%);
      opacity: 0.1;
      z-index: -1;
    }

    header {
      background-color: var(--primary-color);
      color: var(--text-light);
      padding: 15px 10px;
      text-align: center;
      border-radius: 0;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: visible;
    }

    header h1 {
      font-size: 1.4rem;
      font-weight: 700;
      margin: 0;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      z-index: 2;
      position: relative;
      white-space: nowrap;
      overflow: visible;
    }

    header::after {
      content: '';
      position: absolute;
      top: -20px;
      right: -20px;
      width: 100px;
      height: 100px;
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
    }

    .controls-section {
      padding: 15px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .controls-row {
      display: flex;
      gap: 8px;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 8px;
    }

    .pull-btn {
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 6px 8px;
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      flex: 1;
      min-width: 65px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .pull-btn:hover {
      opacity: 0.9;
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
    }

    .pull-btn:active {
      transform: translateY(1px);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .pull-btn.highlight {
      background-color: var(--accent-color);
    }

    #pull-custom-container {
      display: flex;
      gap: 8px;
      width: 100%;
    }

    #customCount {
      flex: 1;
      border-radius: 50px;
      border: 2px solid var(--primary-color);
      background-color: rgba(255, 255, 255, 0.9);
      padding: 10px 15px;
      font-size: 0.9rem;
      color: var(--text-dark);
      outline: none;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    #customCount:focus {
      border-color: var(--accent-color);
      box-shadow: 0 0 0 2px rgba(247, 37, 133, 0.25);
    }

    #pullNN {
      padding: 10px 20px;
    }

    .select-container {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .select-label {
      font-size: 0.9rem;
      font-weight: 600;
      white-space: nowrap;
      color: var(--text-light);
    }

    #special {
      flex: 1;
      padding: 8px 12px;
      border-radius: 8px;
      border: 2px solid var(--primary-color);
      background-color: rgba(255, 255, 255, 0.9);
      color: var(--text-dark);
      font-size: 0.9rem;
      outline: none;
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23007AFF' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: calc(100% - 8px) center;
      padding-right: 28px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
    }

    #special:focus {
      border-color: var(--accent-color);
      box-shadow: 0 0 8px rgba(52, 199, 89, 0.4);
    }

    /* ì œê±°ëœ status-labels ìŠ¤íƒ€ì¼ */

    .log-section {
      flex: 1;
      margin: 10px 15px;
      border-radius: 15px;
      background-color: rgba(0, 0, 0, 0.4);
      box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3);
      position: relative;
      display: flex;
      flex-direction: column;
      min-height: 250px;
    }

    .log-header {
      display: flex;
      padding: 10px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      align-items: center;
      justify-content: space-between;
    }

    .log-title {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-light);
    }

    .log-actions {
      display: flex;
      gap: 8px;
    }

    .log-action-btn {
      background-color: rgba(255, 255, 255, 0.1);
      color: var(--text-light);
      border: none;
      border-radius: 8px;
      padding: 6px 10px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .log-action-btn:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .log-action-btn.primary {
      background-color: var(--primary-color);
    }

    .log-action-btn.primary:hover {
      background-color: var(--accent-color);
    }

    #logContent {
      flex: 1;
      overflow-y: auto;
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 5px;
      max-height: 300px;
    }

    .log-entry {
      padding: 6px 8px;
      border-radius: 6px;
      background-color: rgba(255, 255, 255, 0.05);
      font-size: 0.85rem;
      animation: fadeIn 0.3s ease;
      border-left: 3px solid transparent;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .log-entry.legendary {
      border-left-color: var(--legendary-color);
    }

    .log-entry.epic {
      border-left-color: var(--epic-color);
    }

    .log-entry.rare {
      border-left-color: var(--rare-color);
    }

    .log-entry.uncommon {
      border-left-color: var(--uncommon-color);
    }

    .log-entry.common {
      border-left-color: var(--common-color);
    }

    .summary-section {
      margin: 10px 15px 15px 15px;
      padding: 12px;
      border-radius: 12px;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .summary-title {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text-light);
      opacity: 0.8;
    }

    .summary-content {
      font-size: 0.9rem;
      line-height: 1.4;
      color: var(--text-light);
    }

    .progress-bar-container {
      width: 100%;
      height: 8px;
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      overflow: hidden;
      margin-top: 5px;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
      width: 0%;
      transition: width 0.5s ease;
    }

    /* ì• ë‹ˆë©”ì´ì…˜ ì˜¤ë²„ë ˆì´ ì œê±° */

    .statistics-section {
      padding: 12px;
      margin: 0 15px 15px;
      border-radius: 12px;
      background-color: rgba(255, 255, 255, 0.05);
      display: none;
    }

    .statistics-title {
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--text-light);
      text-align: center;
    }

    .statistics-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }

    .stat-card {
      background-color: rgba(0, 0, 0, 0.2);
      border-radius: 8px;
      padding: 8px;
      text-align: center;
    }

    .stat-value {
      font-size: 0.95rem;
      font-weight: 700;
      color: var(--accent-color);
      margin-bottom: 3px;
    }

    .stat-label {
      font-size: 0.75rem;
      color: rgba(255, 255, 255, 0.7);
    }

    /* Sound Effect Button */
    .sound-toggle {
      position: absolute;
      top: 10px;
      right: 10px;
      background: none;
      border: none;
      color: rgba(255, 255, 255, 0.6);
      font-size: 1.2rem;
      cursor: pointer;
      z-index: 10;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background-color: rgba(0, 0, 0, 0.2);
    }

    .sound-toggle:hover {
      color: rgba(255, 255, 255, 0.9);
      background-color: rgba(0, 0, 0, 0.4);
    }

    /* ë‹¤í¬ëª¨ë“œ í† ê¸€ ì œê±° */

    /* ë¼ì´íŠ¸ í…Œë§ˆ ì œê±° - í•­ìƒ ë‹¤í¬ëª¨ë“œ */

    /* Media Queries */
    /* ë¯¸ë””ì–´ ì¿¼ë¦¬ - ëª¨ë°”ì¼ vs ë°ìŠ¤í¬íƒ‘ */
    @media (max-width: 767px) {
      /* ëª¨ë°”ì¼ ì„¸ë¡œ ëª¨ë“œ */
      body {
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      #app-container {
        width: 100%;
        height: 100vh;
        max-width: 100%;
        max-height: 100vh;
        border-radius: 0;
      }
      
      .controls-section {
        padding: 8px 10px; /* íŒ¨ë”© ìƒë‹¨ ì¤„ì„ */
      }
      
      .controls-row {
        margin-bottom: 6px; /* ì—¬ë°± ì¤„ì„ */
        gap: 6px; /* ê°„ê²© ì¤„ì„ */
      }

      .pull-btn {
        font-size: 0.75rem;
        padding: 5px 6px; /* íŒ¨ë”© ì¤„ì„ */
      }
      
      .log-section {
        min-height: 170px; /* í¬ê²Œ ì¤„ì„ */
        margin: 5px 10px;
      }
      
      #logContent {
        max-height: 170px; /* í¬ê²Œ ì¤„ì„ */
      }
      
      .summary-section, .statistics-section {
        margin: 5px 10px;
        padding: 6px; /* íŒ¨ë”© ë” ì¤„ì„ */
      }
      
      .statistics-section {
        display: block;
      }
      
      /* í—¤ë” ë†’ì´ ì¤„ì„ */
      header {
        padding: 10px 8px; /* íŒ¨ë”© ì¤„ì„ */
      }
      
      header h1 {
        font-size: 1.3rem; /* í°íŠ¸ í¬ê¸° ì¤„ì„ */
      }
      
      /* 360 x 740 í•´ìƒë„ ëŒ€ì‘ */
      .statistics-grid {
        display: flex;
        flex-direction: column; /* ì„¸ë¡œë¡œ ë°°ì¹˜í•˜ì—¬ ê³µê°„ í™•ë³´ */
        gap: 3px; /* ê°„ê²© ë” ì¤„ì„ */
      }
      
      .stat-card {
        flex: 1;
        padding: 4px; /* íŒ¨ë”© ì¤„ì„ */
        margin-bottom: 0;
      }
      
      .stat-value {
        font-size: 0.9rem;
        margin-bottom: 1px; /* ì—¬ë°± ì¤„ì„ */
      }
      
      .stat-label {
        font-size: 0.7rem;
      }
      
      .statistics-title {
        margin-bottom: 3px; /* ì—¬ë°± ì¤„ì„ */
        font-size: 0.8rem;
      }
      
      /* ì§„í–‰ë„ ì„¹ì…˜ ì—¬ë°± ì¤„ì„ */
      .summary-section {
        gap: 3px;
        padding: 6px; /* íŒ¨ë”© ì¤„ì„ */
        margin-bottom: 5px; /* ì—¬ë°± ì¤„ì„ */
      }
      
      .summary-title {
        font-size: 0.75rem;
      }
      
      .summary-content {
        font-size: 0.8rem;
        line-height: 1.3; /* ì¤„ ê°„ê²© ì¤„ì„ */
      }
      
      .progress-bar-container {
        height: 6px; /* ë†’ì´ ì¤„ì„ */
        margin-top: 3px; /* ì—¬ë°± ì¤„ì„ */
      }
    }
    
    /* ì‘ì€ ëª¨ë°”ì¼ í™”ë©´ì— ëŒ€í•œ ì¶”ê°€ ì¡°ì • */
    @media (max-width: 374px) {
      .pull-btn {
        font-size: 0.65rem;
        padding: 4px 5px;
        min-width: 45px;
      }
      
      .log-section {
        min-height: 160px; /* ë” ì¤„ì„ */
      }
      
      #logContent {
        max-height: 160px; /* ë” ì¤„ì„ */
      }
      
      .stat-value {
        font-size: 0.8rem;
      }
      
      .stat-label {
        font-size: 0.6rem;
      }
    }
    
    @media (min-width: 768px) {
      /* íƒœë¸”ë¦¿ê³¼ ë°ìŠ¤í¬íƒ‘ - ê°€ë¡œ ëª¨ë“œ */
      body {
        padding: 0;
        overflow: auto;
        position: static;
        height: auto;
      }
      
      #app-container {
        width: 90%;
        max-width: 1000px;
        height: auto;
        min-height: 600px;
        margin: 20px auto;
        border-radius: 16px;
        overflow: visible;
        display: grid;
        grid-template-columns: 300px 1fr;
        grid-template-rows: auto 1fr auto;
        grid-template-areas:
          "header header"
          "controls log"
          "stats summary";
        gap: 15px;
        padding: 15px;
      }
      
      header {
        grid-area: header;
        border-radius: 12px;
        margin-bottom: 15px;
      }
      
      .controls-section {
        grid-area: controls;
        padding: 15px;
        background-color: rgba(0, 0, 0, 0.2);
        border-radius: 12px;
        height: auto;
      }
      
      .log-section {
        grid-area: log;
        margin: 0;
        border-radius: 12px;
      }
      
      .summary-section {
        grid-area: summary;
        margin: 0;
      }
      
      .statistics-section {
        grid-area: stats;
        display: block;
        margin: 0;
      }
      
      header h1 {
        font-size: 1.8rem;
      }
      
      .pull-btn {
        font-size: 0.9rem;
        padding: 8px 12px;
      }
    }
  </style>
</head>
<body>
  <div id="app-container">
    <div id="app-background"></div>
    
    <button class="sound-toggle" id="soundToggle">ğŸ”Š</button>
    
    <header>
      <h1>êµ°ë‹¨ì¥ ë½‘ê¸° ì‹œë®¬ë ˆì´í„°</h1>
    </header>
    
    <section class="controls-section">
      <div class="controls-row">
        <button id="pull1" class="pull-btn">1íšŒ</button>
        <button id="pull11" class="pull-btn">11íšŒ</button>
        <button id="pull100" class="pull-btn">100íšŒ</button>
        <button id="pull1000" class="pull-btn highlight">1000íšŒ</button>
        <button id="pull5000" class="pull-btn">5000íšŒ</button>
      </div>
      
      <div class="controls-row">
        <div id="pull-custom-container">
          <input type="number" id="customCount" placeholder="ì›í•˜ëŠ” íšŸìˆ˜" min="1">
          <button id="pullNN" class="pull-btn">ë½‘ê¸°</button>
        </div>
      </div>
      
      <div class="select-container">
        <span class="select-label">êµ°ë‹¨ì¥ í”½ì—…:</span>
        <select id="special">
          <option value="none">ì—†ìŒ</option>
        </select>
      </div>
      
      <div class="log-actions" style="margin-top: 10px;">
        <button id="pickupMax" class="pull-btn highlight" style="flex: 1;">ë§Œë ™ê¹Œì§€ ë½‘ê¸°</button>
        <button id="reset" class="pull-btn" style="flex: 1;">ì´ˆê¸°í™”</button>
      </div>
    </section>
    
    <section class="log-section">
      <div class="log-header">
        <div class="log-title">ë½‘ê¸° ê²°ê³¼</div>
      </div>
      <div id="logContent"></div>
    </section>
    
    <section class="summary-section">
      <div class="summary-title">í”½ì—… ìºë¦­í„° ì§„í–‰ë„</div>
      <div id="finalSummary" class="summary-content">í”½ì—… êµ°ë‹¨ì¥ ë ˆë²¨: 0 (0ì¥ ë½‘ìŒ, 67ì¥ ë‚¨ìŒ)</div>
      <div class="progress-bar-container">
        <div id="levelProgress" class="progress-bar" style="width: 0%"></div>
      </div>
    </section>
    
    <section class="statistics-section">
      <div class="statistics-title">ë½‘ê¸° í†µê³„</div>
      <div class="statistics-grid">
        <div class="stat-card">
          <div id="totalPullsStat" class="stat-value">0</div>
          <div class="stat-label">ì´ ë½‘ê¸° íšŸìˆ˜</div>
        </div>
        <div class="stat-card">
          <div id="legendaryRateStat" class="stat-value">0%</div>
          <div class="stat-label">êµ°ë‹¨ì¥ í™•ë¥ </div>
        </div>
        <div class="stat-card">
          <div id="pickupRateStat" class="stat-value">0%</div>
          <div class="stat-label">í”½ì—… ë§Œë ™</div>
        </div>
      </div>
    </section>
  </div>

  <!-- ì• ë‹ˆë©”ì´ì…˜ ì˜¤ë²„ë ˆì´ ì œê±° -->

  <script>
    // ì†Œë¦¬ íš¨ê³¼ í™œì„±í™” ë³€ìˆ˜
    let soundEnabled = true;
    
    // ì „ì—­ ì§„í–‰ë„ ë³€ìˆ˜
    let globalPickupCount = 0;
    
    // ëˆ„ì  ê²°ê³¼ ì €ì¥ ë³€ìˆ˜
    let cumulativeResults = {
      "êµ°ë‹¨ì¥": {},
      "ë§ˆê³„ ê³µì‘": {},
      "ìƒê¸‰ ë§ˆì¡±": {},
      "ì¤‘ê¸‰ ë§ˆì¡±": {},
      "í•˜ê¸‰ ë§ˆì¡±": {}
    };
    
    // í†µê³„ ë³€ìˆ˜
    let totalStats = {
      totalPulls: 0,
      legendaryCount: 0,
      pickupCount: 0
    };

    // ì†Œë¦¬ íš¨ê³¼ ë¡œë“œ
    // const sounds = {
    //   common: new Audio("data:audio/wav;base64,UklGRlQFAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YTAFAACAgICAgICAgICAgICAgICAgICAgICAgICAf3hxeH+AfXZ1eHx6dnR5fYB8dXN2eXt5eHp6eXl5eXl6enp7fHx9fX5/gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgH96eXt7e3t9fX1+fn19fHx7e3t7e3t8fH19fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f4CAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAf3p5en+AgXx7fIF8dXN2eHl3dXp9fnx6fYGDfnh4fIGDgXx7foOFgHl5fIGDgX18f4iMioJ7e4CEgHx8fpCYkHtt0tXJwAAAeIeQiXFnZnGDjZGMgn+Dh4iHh4aEgXt1cXBycnR2eHp7l/0KAACcwuP02LmYgYWQl4+D//z//xwIAADGy8bC5gYAAHpvZF12eHFsrwYAADOkw7xdw+3z7gkWIhoQBAAAi5SPkQsGAAB0EQAAZoiVh/728vPu7ezr7vP19/r7/wQIDA4RDg0KBwUCAQAAAP7AvsG+vr83ZMzW+gsAAIktEg0UERHHBwAAot//+4ZSQkJEQT84Pj9APz04OJobBwAAid3u+BkHAADN/f34CSMoIRH8CyAiHiH2m5KLhPT///8XL0Q8J/4WKSwjF7TFy9L4BwAAld//++4SGRsWDg0QExYYGBgYFhMKAygwKBkPAQAAAAD7jJCPihYIAAB+AQ50dG1nZP8AcHt2cvy+tbK09QMAAJmOiYfFEwAAj5KRjf4EGzpAPDAaAwAA/v8BBQgMDhEUFRUVFBMRDwwJBQIAAP/o0cvHyMs8HSAkHxkRBwkNEBH42drb3wYAAACHh4iJioqKioqKioqKioqKioiHh4eGhoWFhYWFhYWGh4eIioqKioqKioqKioqKioqKioqKiomJiYmIiIiIiIiIiIiIiIiIiImJiYmJiYqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiYmJiYiIiIiIiIiIiIiIiIiIiIiIiIiJiYmJiYqKioqKioqKioqKioqKioqKioqKioqKiYmJiYmJiIiIiIiIiIiIiIiIiIiIiYmJiYmJioqKioqKioqKioqKioqKioqKioqKiomJiYmJiIiIiIiIiIiIiIiIiIiIiImJiYmJiYmKioqKioqKioqKioqKioqKioqKiomJiYmIiIiIh4eHh4eHh4eHh4eHiIiIiImJiYmKioqKioqKioqKioqKioqKioqKiomJiYmIiIiIh4eHh4eHh4eHh4eHiIiIiImJiYmKioqKioqKioqKioqKioqKioqKioqKiYmJiYiIiIiHh4eHh4eHh4eHh4iIiIiJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiI"),
    //   legendary: new Audio("data:audio/wav;base64,UklGRiQTAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQATAACAfn9+gICAf35+foCAgH9+fn+AgIB/fn5/gICAf35/gICAgH9+f4CAgH9/f4CAgH9/f4CAgH9/f4GBgYB/gIGBgYCAf4CAgIB/f4CAgIB/f4CAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgIB/gICAgH9/gICAgH9/f4CAgH9/f4CAfn5+foCAgH5+fn+AgIB+fn5/gICAfn5+f4CAgH5+fn+AgIB+fn5/gICAfn5+f4CAgH5+fn+AgIB+fn5/gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB9fX1+gICAfX19foCAgH19fX6AgIB8fHx9fX18fHx8fX19fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0c3NzcnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwb29vb29vb29vb29vb29vb29vb29vb29vb29vb29vb29vb29vb29ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2trampqampqampqampqampqampqampqampqampqampqampqampqaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1taWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQT39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0c3NzcnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycnJycXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwb29vb29vb29vb29vb29vb29vb29vb29vb29vb29vb29vb29vb29ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2trampqampqampqampqampqampqampqampqampqampqampqampqaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1taWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NTU1NSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQT39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0c3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3NzdHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAf39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6enp6eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0c3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3NzdHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dXV1dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4")
    // };

    // ê° ë“±ê¸‰ë³„ ìœ ë‹› ë°°ì—´ (êµ°ë‹¨ì¥ì€ ì•„ë˜ ë°°ì—´ë¡œ ë³€ê²½)
    const units = {
      "í•˜ê¸‰ ë§ˆì¡±": ["ìƒˆì‹¹ì´", "ìŠ¤ë¦¬ìŠ¬ì©ëƒ¥", "ìƒ¤í‚¤", "ë¯¸ë¼ì”¨", "ì‹ë¹µ ë³µì„œ", "í•´ê³¨ ê¶ìˆ˜"],
      "ì¤‘ê¸‰ ë§ˆì¡±": ["ìº”ë“œë¦¬", "í¬í¬ëª¬", "ëŒíŒ”ì´", "ê¼¬ê¼¬ì§ˆë¼", "ì—­ë³‘ ì˜ì‚¬", "ì•…ë§ˆ í† ë¼"],
      "ìƒê¸‰ ë§ˆì¡±": ["ê·¸ë¦°ë”©ë”©", "í• ë¡œìœˆ í€¸", "ë¡œí°ë¡¤ìŠ¤", "ë¹… í—¤ë“œ", "ì˜¤ìš°ê±° ì „ì‚¬"],
      "ë§ˆê³„ ê³µì‘": ["ì„ ì¸ì¥ ê±´ë§¨", "ì¹´ìš°ë³´ì´ ë°¥", "ë©”ì¹´ì½©", "ìŠ¤ì‹œ ì„ ìƒ"],
      "êµ°ë‹¨ì¥": ["ìš”ìš”","ì•„ë§ˆì¡´", "ë§ˆë…€", "ìŠ¤í•‘", "ì£½ìŒì˜ ê¸°ì‚¬", "ë³´ë£¨", "ë¼ì´ì–‘", "ì˜¤í¬ ë¼ì´ë”", "ë°ë“œë² ì–´", "ì­ ì˜¤", "ë¹…í† ë¦¬ì–´ìŠ¤", "í”„ë‘í‚¤", "ëˆˆë³´ë¼ ì˜ˆí‹°", "ìŠˆí¼ì‹œë°”", "ê°œêµ´ ë‹¨ì¥", "ìš°ì£¼ì¸", "í•´ê³¨ë£¡", "ì „íˆ¬ ë‹¬íŒ½ì´", "ë©”ì¹´ ì¢€ë¹„", "í¬ë˜ì´ì§€ í•«ë„ê·¸", "ë¯¸ë¯¹", "ë“œë¼í"]
    };

    // ë“±ê¸‰ ë§¤í•‘
    const rarityClasses = {
      "êµ°ë‹¨ì¥": "legendary",
      "ë§ˆê³„ ê³µì‘": "epic",
      "ìƒê¸‰ ë§ˆì¡±": "rare",
      "ì¤‘ê¸‰ ë§ˆì¡±": "uncommon",
      "í•˜ê¸‰ ë§ˆì¡±": "common"
    };

    // ê° ë“±ê¸‰ë³„ ë½‘ê¸° í™•ë¥  (ì´ 100%)
    const probabilities = {
      "í•˜ê¸‰ ë§ˆì¡±": 42,
      "ì¤‘ê¸‰ ë§ˆì¡±": 27,
      "ìƒê¸‰ ë§ˆì¡±": 19,
      "ë§ˆê³„ ê³µì‘": 10,
      "êµ°ë‹¨ì¥": 2
    };

    // DOM ìš”ì†Œ
    const logContent = document.getElementById('logContent');
    const finalSummaryDiv = document.getElementById('finalSummary');
    const levelProgressBar = document.getElementById('levelProgress');
    const soundToggleBtn = document.getElementById('soundToggle');
    const specialSelect = document.getElementById('special'); // í”½ì—… ì„ íƒ ìš”ì†Œ
    
    // í†µê³„ ìš”ì†Œ
    const totalPullsStat = document.getElementById('totalPullsStat');
    const legendaryRateStat = document.getElementById('legendaryRateStat');
    const pickupRateStat = document.getElementById('pickupRateStat');
    const averageCostStat = document.getElementById('averageCostStat');
    
    // êµ°ë‹¨ì¥ í”½ì—… ì˜µì…˜ ì±„ìš°ê¸°
    // ì˜µì…˜ ì´ˆê¸°í™” (ì¤‘ë³µ ë°©ì§€)
    specialSelect.innerHTML = '';
    
    // ë¨¼ì € "ì—†ìŒ" ì˜µì…˜ ì¶”ê°€
    const noneOption = document.createElement('option');
    noneOption.value = "none";
    noneOption.textContent = "ì—†ìŒ";
    specialSelect.appendChild(noneOption);

    // ê·¸ ë‹¤ìŒ êµ°ë‹¨ì¥ë“¤ ì¶”ê°€
    units["êµ°ë‹¨ì¥"].forEach(unit => {
      const option = document.createElement('option');
      option.value = unit;
      option.textContent = unit;
      specialSelect.appendChild(option);
    });

    // ì†Œë¦¬ í† ê¸€ ê¸°ëŠ¥
    soundToggleBtn.addEventListener('click', () => {
      soundEnabled = !soundEnabled;
      soundToggleBtn.textContent = soundEnabled ? 'ğŸ”Š' : 'ğŸ”‡';
    });

    // ì†Œë¦¬ë§Œ ì¬ìƒí•˜ëŠ” í•¨ìˆ˜ (ì• ë‹ˆë©”ì´ì…˜ ì œê±°)
    // function playSound(rarity) {
    //   if (!soundEnabled) return;
      
    //   if (rarity === "êµ°ë‹¨ì¥") {
    //     sounds.legendary.play();
    //   } else {
    //     sounds.common.play();
    //   }
    // }

    // ë¡œê·¸ ì¶”ê°€ í•¨ìˆ˜
    function addLog(message, rarity) {
      const logEntry = document.createElement('div');
      logEntry.className = 'log-entry';
      logEntry.textContent = message;
      
      if (rarity) {
        logEntry.classList.add(rarityClasses[rarity]);
      }
      
      logContent.appendChild(logEntry);
    }

    // ë¡œê·¸ ë§¨ ìœ„ì— ì¶”ê°€ í•¨ìˆ˜
    function addLogAtTop(message, rarity) {
      const logEntry = document.createElement('div');
      logEntry.className = 'log-entry';
      logEntry.textContent = message;
      
      if (rarity) {
        logEntry.classList.add(rarityClasses[rarity]);
      }
      
      logContent.insertBefore(logEntry, logContent.firstChild);
      logContent.scrollTop = 0;
    }

    // ë¡œê·¸ì°½ ì´ˆê¸°í™” (í†µê³„ëŠ” ì´ˆê¸°í™”í•˜ì§€ ì•ŠìŒ, í”½ì—… ì§„í–‰ë„ë„ ìœ ì§€)
    function clearLog() {
      logContent.innerHTML = "";
      
      // í”½ì—… ì§„í–‰ë„ëŠ” ìœ ì§€, í™”ë©´ ì—…ë°ì´íŠ¸
      updateFinalSummary(globalPickupCount);
    }
    
    // ëª¨ë“  ê²ƒì„ ì´ˆê¸°í™” (í†µê³„ í¬í•¨, í”½ì—… ì§„í–‰ë„ í¬í•¨)
    function resetLog() {
      clearLog();
      
      // í†µê³„ ì´ˆê¸°í™”
      totalStats = {
        totalPulls: 0,
        legendaryCount: 0,
        pickupCount: 0
      };
      
      // ëˆ„ì  ê²°ê³¼ ì´ˆê¸°í™”
      cumulativeResults = {
        "êµ°ë‹¨ì¥": {},
        "ë§ˆê³„ ê³µì‘": {},
        "ìƒê¸‰ ë§ˆì¡±": {},
        "ì¤‘ê¸‰ ë§ˆì¡±": {},
        "í•˜ê¸‰ ë§ˆì¡±": {}
      };
      
      // í”½ì—… ì§„í–‰ë„ ì´ˆê¸°í™”
      globalPickupCount = 0;
      finalSummaryDiv.innerText = "í”½ì—… êµ°ë‹¨ì¥ ë ˆë²¨: 0 (0ì¥ ë½‘ìŒ, 67ì¥ ë‚¨ìŒ)";
      levelProgressBar.style.width = "0%";
      
      totalPullsStat.textContent = "0";
      legendaryRateStat.textContent = "0%";
      pickupRateStat.textContent = "0%";
    }

    // ë½‘ê¸° ì „ ë“±ê¸‰ ê²°ì • (ê°€ì¤‘ì¹˜ ì ìš©)
    function drawRarity() {
      let rand = Math.random() * 100;
      let sum = 0;
      for (let key in probabilities) {
        sum += probabilities[key];
        if (rand < sum) return key;
      }
      return null;
    }

    // ë“±ê¸‰ì— ë”°ë¥¸ ìœ ë‹› ê²°ì • í•¨ìˆ˜
    function drawUnit(rarity) {
      if (rarity !== "êµ°ë‹¨ì¥") {
        const arr = units[rarity];
        return arr[Math.floor(Math.random() * arr.length)];
      } else {
        const specialChoice = document.getElementById('special').value;
        const arr = units["êµ°ë‹¨ì¥"];
        if (specialChoice !== "none") {
          if (Math.random() < 0.5) return specialChoice;
          else {
            const others = arr.filter(item => item !== specialChoice);
            return others[Math.floor(Math.random() * others.length)];
          }
        } else {
          return arr[Math.floor(Math.random() * arr.length)];
        }
      }
    }

    // ìœ ë‹›ì˜ ë“±ê¸‰ ë°˜í™˜ í•¨ìˆ˜
    function getRarity(unit) {
      for (let key in units) {
        if (units[key].includes(unit)) return key;
      }
      return "";
    }

    // ëˆ„ì  ì¹´ë“œ ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í”½ì—… ìºë¦­í„° ë ˆë²¨ ê³„ì‚° í•¨ìˆ˜
    function calculateLevel(count) {
      const thresholds = [
        { level: 1, count: 1 },
        { level: 2, count: 2 },
        { level: 3, count: 3 },
        { level: 4, count: 4 },
        { level: 5, count: 5 },
        { level: 6, count: 6 },
        { level: 7, count: 7 },
        { level: 8, count: 8 },
        { level: 9, count: 9 },
        { level: 10, count: 10 },
        { level: 11, count: 12 },
        { level: 12, count: 14 },
        { level: 13, count: 16 },
        { level: 14, count: 18 },
        { level: 15, count: 21 },
        { level: 16, count: 25 },
        { level: 17, count: 30 },
        { level: 18, count: 40 },
        { level: 19, count: 52 },
        { level: 20, count: 67 }
      ];
      let lvl = 0;
      for (let i = 0; i < thresholds.length; i++) {
        if (count >= thresholds[i].count) {
          lvl = thresholds[i].level;
        } else {
          break;
        }
      }
      return lvl;
    }

    // ìµœì¢… ìš”ì•½ ì˜ì—­ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateFinalSummary(pickupCount) {
      const required = 67; // í•„ìš”í•œ ì¹´ë“œ ìˆ˜
      let remaining = required - pickupCount;
      let extra = 0;
      if (remaining < 0) {
        extra = -remaining;
        remaining = 0;
      }
      const level = calculateLevel(pickupCount);
      let extraText = (extra > 0) ? " " + extra + "ì¥ ë” ë½‘ìŒ" : "";
      finalSummaryDiv.innerText = "í”½ì—… êµ°ë‹¨ì¥ ë ˆë²¨: " + level + " \n(" + pickupCount + "ì¥ ë½‘ìŒ, " + remaining + "ì¥ ë‚¨ìŒ" + extraText + ")";
      
      // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì—…ë°ì´íŠ¸
      const progressPercentage = Math.min(100, (pickupCount / required) * 100);
      levelProgressBar.style.width = progressPercentage + "%";
      
      // ì „ì—­ ë³€ìˆ˜ ì—…ë°ì´íŠ¸
      globalPickupCount = pickupCount;
    }

    // í†µê³„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateStatistics(totalPulls, legendaryCount, pickupCount) {
      totalStats.totalPulls += totalPulls;
      totalStats.legendaryCount += legendaryCount;
      totalStats.pickupCount += pickupCount;
      
      totalPullsStat.textContent = totalStats.totalPulls;
      
      // êµ°ë‹¨ì¥ í™•ë¥ 
      if (totalStats.totalPulls > 0) {
        const legendaryRate = (totalStats.legendaryCount / totalStats.totalPulls * 100).toFixed(2);
        legendaryRateStat.textContent = legendaryRate + "%";
        
        // í”½ì—… íšë“ìœ¨ (í˜„ì¬ ë½‘ì€ í”½ì—… ê°œìˆ˜ / ëª©í‘œ 67ì¥)ì˜ ë¹„ìœ¨
        const progressPercent = (globalPickupCount / 67 * 100);
        pickupRateStat.textContent = Math.min(100, progressPercent.toFixed(2)) + "%";
      }
    }

    // ì¼ë°˜ ë½‘ê¸° ì‹œë®¬ë ˆì´ì…˜ í•¨ìˆ˜
    function simulate(count) {
      const desired = document.getElementById('special').value;
      let pickupCount = globalPickupCount; // ì „ì—­ ë³€ìˆ˜ì—ì„œ í˜„ì¬ í”½ì—… ì¹´ìš´íŠ¸ ê°€ì ¸ì˜¤ê¸°
      let legendaryCount = 0; // ì´ë²ˆ ì‹œë®¬ë ˆì´ì…˜ì—ì„œì˜ êµ°ë‹¨ì¥ ê°œìˆ˜
      
      // ì´ë²ˆ ë½‘ê¸° ê²°ê³¼ ì €ì¥ìš© ì„ì‹œ ê°ì²´
      let currentPullResults = {
        "êµ°ë‹¨ì¥": {},
        "ë§ˆê³„ ê³µì‘": {},
        "ìƒê¸‰ ë§ˆì¡±": {},
        "ì¤‘ê¸‰ ë§ˆì¡±": {},
        "í•˜ê¸‰ ë§ˆì¡±": {}
      };
      
      if (count >= 11) {
        for (let i = 0; i < count; i++) {
          const rarity = drawRarity();
          const unit = drawUnit(rarity);
          
          // êµ°ë‹¨ì¥ ì†Œë¦¬ëŠ” ë§ˆì§€ë§‰ 1ê°œë§Œ ì¬ìƒ
          if (rarity === "êµ°ë‹¨ì¥" && i === count - 1) {
            playSound(rarity);
          }
          
          if (rarity === "êµ°ë‹¨ì¥") {
            currentPullResults[rarity][unit] = (currentPullResults[rarity][unit] || 0) + 2;
            legendaryCount++;
            if (unit === desired && desired !== "none") {
              pickupCount += 2;
            }
          } else {
            currentPullResults[rarity][unit] = (currentPullResults[rarity][unit] || 0) + 1;
          }
        }
        
        // ê²°ê³¼ ë¡œê·¸ í‘œì‹œ ì „ì— ë¡œê·¸ ì˜ì—­ ë¹„ìš°ê¸°
        logContent.innerHTML = "";
        
        // ëˆ„ì  ê²°ê³¼ì™€ í˜„ì¬ ê²°ê³¼ í•©ì³ì„œ í‘œì‹œ
        updateAndDisplayResults(currentPullResults);
      } else {
        for (let i = 0; i < count; i++) {
          const rarity = drawRarity();
          const unit = drawUnit(rarity);
          
          // ì†Œë¦¬ ì¬ìƒ
          playSound(rarity);
          
          if (rarity === "êµ°ë‹¨ì¥") {
            currentPullResults[rarity][unit] = (currentPullResults[rarity][unit] || 0) + 2;
            legendaryCount++;
            if (unit === desired && desired !== "none") {
              pickupCount += 2;
            }
          } else {
            currentPullResults[rarity][unit] = (currentPullResults[rarity][unit] || 0) + 1;
          }
        }
        
        // ê²°ê³¼ ë¡œê·¸ í‘œì‹œ ì „ì— ë¡œê·¸ ì˜ì—­ ë¹„ìš°ê¸°
        logContent.innerHTML = "";
        
        // ëˆ„ì  ê²°ê³¼ì™€ í˜„ì¬ ê²°ê³¼ í•©ì³ì„œ í‘œì‹œ
        updateAndDisplayResults(currentPullResults);
      }
      
      updateFinalSummary(pickupCount);
      updateStatistics(count, legendaryCount, pickupCount);
      
      // ìŠ¤í¬ë¡¤ì„ ë§¨ ìœ„ë¡œ ì˜¬ë¦¼
      logContent.scrollTop = 0;
    }
    
    // ëˆ„ì  ê²°ê³¼ì™€ í˜„ì¬ ê²°ê³¼ë¥¼ í•©ì³ì„œ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
    function updateAndDisplayResults(currentResults) {
      // ë“±ê¸‰ ìˆœì„œ (êµ°ë‹¨ì¥ì´ ë¨¼ì € í‘œì‹œë˜ë„ë¡)
      const rarityOrder = ["êµ°ë‹¨ì¥", "ë§ˆê³„ ê³µì‘", "ìƒê¸‰ ë§ˆì¡±", "ì¤‘ê¸‰ ë§ˆì¡±", "í•˜ê¸‰ ë§ˆì¡±"];
      const desired = document.getElementById('special').value;
      
      // ê²°ê³¼ ë°°ì—´ ì¤€ë¹„
      let resultArray = [];
      
      // ëª¨ë“  ë“±ê¸‰ì— ëŒ€í•´ ì²˜ë¦¬
      rarityOrder.forEach(rarity => {
        // ë¨¼ì € í˜„ì¬ ê²°ê³¼ ì—…ë°ì´íŠ¸
        for (let unit in currentResults[rarity]) {
          const currentCount = currentResults[rarity][unit] || 0;
          const prevCount = cumulativeResults[rarity][unit] || 0;
          cumulativeResults[rarity][unit] = prevCount + currentCount;
        }
        
        // ê·¸ ë‹¤ìŒ ëˆ„ì  ê²°ê³¼ì— ìˆëŠ” ëª¨ë“  ìœ ë‹› í‘œì‹œ
        for (let unit in cumulativeResults[rarity]) {
          const totalCount = cumulativeResults[rarity][unit];
          // í˜„ì¬ ë½‘ê¸°ì—ì„œ ì–»ì€ ìˆ˜ëŸ‰ (ì—†ìœ¼ë©´ 0)
          const currentCount = currentResults[rarity][unit] || 0;
          
          resultArray.push({
            unit: unit,
            rarity: rarity,
            currentCount: currentCount,
            totalCount: totalCount,
            isPickup: (unit === desired && desired !== "none")
          });
        }
      });
      
      // ê²°ê³¼ ì •ë ¬ (í”½ì—… ìºë¦­í„°ë¥¼ ìµœìš°ì„ , ê·¸ ë‹¤ìŒ êµ°ë‹¨ì¥)
      resultArray.sort((a, b) => {
        // í”½ì—… ìºë¦­í„°ê°€ í•­ìƒ ìµœìš°ì„  (ë§¨ ìœ„)
        if (a.isPickup && !b.isPickup) return -1;
        if (!a.isPickup && b.isPickup) return 1;
        
        // ë‘˜ ë‹¤ í”½ì—…ì´ ì•„ë‹ˆë©´ ë“±ê¸‰ë³„ë¡œ ì •ë ¬
        const aIndex = rarityOrder.indexOf(a.rarity);
        const bIndex = rarityOrder.indexOf(b.rarity);
        if (aIndex !== bIndex) return aIndex - bIndex;
        
        // ê°™ì€ ë“±ê¸‰ ë‚´ì—ì„œëŠ” ì´ë¦„ìˆœ
        return a.unit.localeCompare(b.unit);
      });
      
      // ê²°ê³¼ í‘œì‹œ
      resultArray.forEach(item => {
        let displayText = item.unit + " " + item.totalCount + "ê°œ";
        if (item.currentCount > 0) {
          displayText += " (+" + item.currentCount + ")";
        }
        addLog(displayText, item.rarity);
      });
    }

    // í”½ì—… êµ°ë‹¨ì¥ ë§Œë ™ê¹Œì§€ ë½‘ê¸° ì‹œë®¬ë ˆì´ì…˜ í•¨ìˆ˜
    function simulateUntilMax() {
      clearLog(); // resetLogê°€ ì•„ë‹Œ clearLogë¥¼ ì‚¬ìš© (í†µê³„ëŠ” ëˆ„ì )
      const pickupButton = document.getElementById('pickupMax');
      pickupButton.disabled = true;
      const desired = document.getElementById('special').value;
      
      if (desired === "none") {
        addLogAtTop("ì›í•˜ëŠ” êµ°ë‹¨ì¥ì„ ì„ íƒí•˜ì„¸ìš”.", "");
        pickupButton.disabled = false;
        return;
      }
      
      let countDesired = globalPickupCount; // ì „ì—­ ë³€ìˆ˜ì—ì„œ í˜„ì¬ í”½ì—… ì¹´ìš´íŠ¸ ê°€ì ¸ì˜¤ê¸°
      let totalPulls = 0;   // ì „ì²´ ë½‘ì€ íšŸìˆ˜
      let legendaryCount = 0; // ì „ì²´ êµ°ë‹¨ì¥ ê°œìˆ˜
      let lastDesiredLine = "";
      let aggregate = {
        "êµ°ë‹¨ì¥": {},
        "ë§ˆê³„ ê³µì‘": {},
        "ìƒê¸‰ ë§ˆì¡±": {},
        "ì¤‘ê¸‰ ë§ˆì¡±": {},
        "í•˜ê¸‰ ë§ˆì¡±": {}
      };

      // ì´ë¯¸ ë§Œë ™ì¸ ê²½ìš° ì²´í¬
      if (countDesired >= 67) {
        addLog("ì´ë¯¸ ë§Œë ™ì…ë‹ˆë‹¤! ì´ˆê¸°í™” í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.", "êµ°ë‹¨ì¥");
        pickupButton.disabled = false;
        return;
      }

      // ë§Œë ™ê¹Œì§€ ë½‘ê¸° ì‹œë®¬ë ˆì´ì…˜
      while (true) {
        const rarity = drawRarity();
        const unit = drawUnit(rarity);
        totalPulls++;

        if (rarity === "êµ°ë‹¨ì¥") {
          aggregate["êµ°ë‹¨ì¥"][unit] = (aggregate["êµ°ë‹¨ì¥"][unit] || 0) + 2;
          legendaryCount++;
          if (unit === desired) {
            countDesired += 2;
            lastDesiredLine = "[" + rarity + "] " + unit + " (x2) ë½‘í˜”ìŠµë‹ˆë‹¤. (ëˆ„ì  " + countDesired + ")";
          }
        } else {
          aggregate[rarity][unit] = (aggregate[rarity][unit] || 0) + 1;
        }
        
        // ì¢…ë£Œ ì¡°ê±´ ì²´í¬
        if (totalPulls >= 5000 && countDesired < 67) break;
        if (countDesired >= 67) break;
      }

      if (countDesired < 67) {
        addLog("5ì²œíšŒë¥¼ ì „ë¶€ ë½‘ì•˜ìŠµë‹ˆë‹¤.", "êµ°ë‹¨ì¥");
        addLog("ë§Œë ™ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", "êµ°ë‹¨ì¥");
        addLog("í˜„ì¬ ë½‘ì€ ê°œìˆ˜ (" + countDesired + ") í•„ìš”í•œ ê°œìˆ˜ (67)", "êµ°ë‹¨ì¥");
      } else {
        addLog("ì´ " + totalPulls + "íšŒ ë½‘ì•„ì„œ ë§Œë ™ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.", "êµ°ë‹¨ì¥");
        
        // ë§Œë ™ ë‹¬ì„± ì†Œë¦¬
        playSound("êµ°ë‹¨ì¥");
      }
      
      // ê²°ê³¼ ì •ë ¬ ë° í‘œì‹œ
      const summaryOrder = ["êµ°ë‹¨ì¥", "ë§ˆê³„ ê³µì‘", "ìƒê¸‰ ë§ˆì¡±", "ì¤‘ê¸‰ ë§ˆì¡±", "í•˜ê¸‰ ë§ˆì¡±"];
      summaryOrder.forEach(category => {
        let line = "ë½‘ì€ " + category + ": ";
        let unitNames = [];
        
        for (let name in aggregate[category]) {
          // í”½ì—… ìºë¦­í„°ë¥¼ ë§¨ ì•ìœ¼ë¡œ
          const isPickup = (name === desired && desired !== "none");
          const unitText = name + " " + aggregate[category][name] + "ê°œ";
          
          if (isPickup) {
            unitNames.unshift(unitText); // í”½ì—… ìºë¦­í„°ëŠ” ë§¨ ì•ìœ¼ë¡œ
          } else {
            unitNames.push(unitText); // ë‚˜ë¨¸ì§€ëŠ” ê·¸ëŒ€ë¡œ ì¶”ê°€
          }
        }
        
        if (unitNames.length > 0) {
          line += unitNames.join(", ");
        } else {
          line += "ì—†ìŒ";
        }
        
        addLog(line, category);
      });
      
      updateFinalSummary(countDesired);
      updateStatistics(totalPulls, legendaryCount, countDesired);
      pickupButton.disabled = false;
      
      // ìŠ¤í¬ë¡¤ì„ ë§¨ ìœ„ë¡œ ì˜¬ë¦¼
      logContent.scrollTop = 0;
    }

    // ì´ë²¤íŠ¸ ì—°ê²°
    document.getElementById('pull1').addEventListener('click', () => simulate(1));
    document.getElementById('pull11').addEventListener('click', () => simulate(11));
    document.getElementById('pull100').addEventListener('click', () => simulate(100));
    document.getElementById('pull1000').addEventListener('click', () => simulate(1000));
    document.getElementById('pull5000').addEventListener('click', () => simulate(5000));
    document.getElementById('pullNN').addEventListener('click', () => {
      const count = parseInt(document.getElementById('customCount').value);
      if (!isNaN(count) && count > 0) simulate(count);
    });
    document.getElementById('pickupMax').addEventListener('click', simulateUntilMax);
    document.getElementById('reset').addEventListener('click', resetLog);
    
    // í”½ì—… ë³€ê²½ ì´ë²¤íŠ¸ ì¶”ê°€ - í”½ì—…ì´ ë³€ê²½ë˜ë©´ ìë™ìœ¼ë¡œ ì´ˆê¸°í™”
    specialSelect.addEventListener('change', () => {
      resetLog();
    });
  </script>
</body>
</html>