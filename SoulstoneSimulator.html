<!DOCTYPE html>
<html lang="ko">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‚¬ë… ê°•í™” ì‹œë®¬ë ˆì´í„°</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>

        
        
        body {
            font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', 'Malgun', 'Helvetica', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5efef;
            display: flex;
            justify-content: center;
            align-items: center;
           
            overflow: hidden;
        }
        .container {
            width: 360px;
            height: 360px;
            position: relative; /* ë¶€ëª¨ ìš”ì†Œì— relative í¬ì§€ì…˜ì„ ì„¤ì • */
        }
        
        .item-img {
            width: 360px; /* mm.png í¬ê¸° */
            height: 360px; /* mm.png í¬ê¸° */
            position: absolute; /* ì ˆëŒ€ ìœ„ì¹˜ë¡œ ì„¤ì •í•˜ì—¬ ë¶€ëª¨ ì»¨í…Œì´ë„ˆì˜ ë§¨ ìœ„ì— ê³ ì • */
            top: 0; /* ë¶€ëª¨ ì»¨í…Œì´ë„ˆì˜ ìƒë‹¨ì— ë§ì¶”ê¸° */
            left: 0; /* ë¶€ëª¨ ì»¨í…Œì´ë„ˆì˜ ì™¼ìª½ì— ë§ì¶”ê¸° */
        }
        
        .content {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
        }
        .top-section {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .item-img {
            width: 360px; /* mm.png í¬ê¸° */
            height: 360px; /* mm.png í¬ê¸° */
            position: absolute; /* ì ˆëŒ€ ìœ„ì¹˜ë¡œ ì„¤ì •í•˜ì—¬ ë¶€ëª¨ ì»¨í…Œì´ë„ˆì˜ ë§¨ ìœ„ì— ê³ ì • */
            top: 0; /* ë¶€ëª¨ ì»¨í…Œì´ë„ˆì˜ ìƒë‹¨ì— ë§ì¶”ê¸° */
            left: 0; /* ë¶€ëª¨ ì»¨í…Œì´ë„ˆì˜ ì™¼ìª½ì— ë§ì¶”ê¸° */
        }

.mma-img {
    
    position: absolute; /* mma.pngë¥¼ ì¤‘ì•™ì— ìœ„ì¹˜ì‹œí‚¤ê¸° ìœ„í•´ ì ˆëŒ€ í¬ì§€ì…˜ */
    top: 50%; /* ë¶€ëª¨ì˜ ì„¸ë¡œ ì¤‘ì•™ì— ìœ„ì¹˜ */
    left: 50%; /* ë¶€ëª¨ì˜ ê°€ë¡œ ì¤‘ì•™ì— ìœ„ì¹˜ */
    transform: translate(-50%, -50%); /* ì •í™•í•˜ê²Œ ì¤‘ì•™ ì •ë ¬ */
    width: 60px; /* mma.png í¬ê¸° */
    height: 60px; /* mma.png í¬ê¸° */
}
.item-info {
    position: absolute;
    top: 250px;
    left: 50%;
    transform: translateX(-50%); /* ì¤‘ì•™ ì •ë ¬ */
    text-align: center;
    font-size: 18px;
    color: white;
    width: 90%;
    background-color: rgba(0, 0, 0, 0.5); /* ë°˜íˆ¬ëª… ê²€ì •ìƒ‰ ë°°ê²½ */
    border-radius: 15px; /* ëª¨ì„œë¦¬ ê¹ê¸° */
    padding: 10px; /* í…ìŠ¤íŠ¸ì™€ ë°°ê²½ì˜ ì—¬ë°± */
}


.material-info {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 5px;
    text-align: center; /* ê°€ìš´ë° ì •ë ¬ */
    color: white;
    z-index: 1; /* ë‹¤ë¥¸ ìš”ì†Œë“¤ ìœ„ì— í‘œì‹œë˜ë„ë¡ */
}

.material-info div {
    margin: 0 10px;
    
}



.successcount {
    position: absolute;
    bottom: -270px; /* í™”ë©´ ìƒë‹¨ì—ì„œ 20px ë–¨ì–´ì§€ê²Œ ìœ„ì¹˜ */
    right: 20px; /* í™”ë©´ ê°€ë¡œ ì¤‘ì•™ì— ìœ„ì¹˜ */
    
    font-size: 16px; /* ê¸€ì”¨ í¬ê¸° */
    
    color: #292727; /* í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
    
    border-radius: 10px; /* í…Œë‘ë¦¬ ë‘¥ê¸€ê²Œ */
    padding: 10px; /* ë‚´ë¶€ ì—¬ë°± */
    z-index: 2; /* ë‹¤ë¥¸ ìš”ì†Œë“¤ ìœ„ì— í‘œì‹œë˜ë„ë¡ */
}

.successcount div {
    margin: 5px 0; /* ê° í•­ëª© ê°„ì˜ ê°„ê²© */
}

.successcount span {
    color: #000000; /* ì„±ê³µ íšŸìˆ˜, ì‹¤íŒ¨ íšŸìˆ˜ì˜ í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
    font-size: 18px; /* ìˆ«ì í¬ê¸° */
}







.material-info img {
    width: 20px;
    margin-right: 5px;
}

.material-info span {
    
    font-size: 14px;
}


.button-container {
    position: relative; /* ë²„íŠ¼ë“¤ì´ ë°€ë¦¬ì§€ ì•Šë„ë¡ */
    z-index: 2; /* ë²„íŠ¼ì„ ë‹¤ë¥¸ ìš”ì†Œë“¤ ìœ„ì— ë°°ì¹˜ */
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%); /* ì¤‘ì•™ ì •ë ¬ */
    width: 80%;
    display: flex;
    justify-content: center;
    
}
@keyframes sparkle {
    0% {
        box-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #fff;
    }
    50% {
        box-shadow: 0 0 5px #f39c12, 0 0 10px #f39c12, 0 0 15px #f39c12;
    }
    100% {
        box-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #fff;
    }
}

/* í”ë“¤ë¦¬ëŠ” ì• ë‹ˆë©”ì´ì…˜ (ê°•í™” ì‹¤íŒ¨ ì‹œ) */
@keyframes shake {
    0% {
        transform: translateX(0); /* ì›ë˜ ìœ„ì¹˜ */
    }
    25% {
        transform: translateX(-10px); /* ì™¼ìª½ìœ¼ë¡œ 10px ì´ë™ */
    }
    50% {
        transform: translateX(10px); /* ì˜¤ë¥¸ìª½ìœ¼ë¡œ 10px ì´ë™ */
    }
    75% {
        transform: translateX(-10px); /* ì™¼ìª½ìœ¼ë¡œ 10px ì´ë™ */
    }
    100% {
        transform: translateX(0); /* ì›ë˜ ìœ„ì¹˜ë¡œ ëŒì•„ì˜´ */
    }
}

/* ì‹¤íŒ¨ ì‹œ ë²„íŠ¼ í”ë“¤ë¦¬ê¸° */
.button.failure {
    animation: shake 0.5s ease-in-out; /* í”ë“¤ë¦¬ëŠ” ì• ë‹ˆë©”ì´ì…˜ */
}


.button {
    display: inline-block;
    padding: 0px;
    font-size: 18px;
    font-weight: bold;
    text-align: center;
    border-radius: 5px;
    border: 2px solid #edf035;
    background-color: #f0f34b;
    color: rgb(20, 20, 20);
    transition: all 0.2s ease-in-out;
    min-height: 50px;    /* ë²„íŠ¼ ìµœì†Œ ë†’ì´ ê³ ì • */
    line-height: 1.2;    /* í…ìŠ¤íŠ¸ ì¤„ ë†’ì´ */
}




   
   
/* ê°•í™” ì„±ê³µ ì‹œ ë°˜ì§ì´ëŠ” ì• ë‹ˆë©”ì´ì…˜ */
.button.success {
    animation: sparkle 1s ease-out;
}

/* ê°•í™” ì‹¤íŒ¨ ì‹œ ì—°ê¸° ë‚˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ */
.button.failure {
    animation: smoke 1s ease-in-out infinite;
}



        .button.failure {
            animation: smoke 1s ease-in-out infinite;
        }
        @keyframes smoke {
            0% {
                box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            }
            100% {
                box-shadow: 0 0 20px rgba(0, 0, 0, 0.2), 0 0 30px rgba(0, 0, 0, 0.3);
            }
        }
        .log {
    position: absolute;
    bottom: -190px;       /* ì»¨í…Œì´ë„ˆ í•˜ë‹¨ì—ì„œ 10px ìœ„ì— ê³ ì • */
    left: 0;            /* ì¢Œì¸¡ ëì— ê³ ì • */
    width: 100%;        /* ë¶€ëª¨ ë„ˆë¹„ì— ë§ì¶¤ */
    height: 80px;       /* ê³ ì • ë†’ì´ */
    overflow-y: auto;
    background-color: #f5efef;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    color: black;
    font-size: 14px;
    box-sizing: border-box;
    z-index: 2;
}

        
        .log p {
            margin: 5px 0;
        }
        
        .log::-webkit-scrollbar {
            width: 5px;
        }
        
        .log::-webkit-scrollbar-thumb {
            background-color: #888;
            border-radius: 10px;
        }
        
        

        
        .material-info-button {
            margin-top: 10px;
            padding: 5px 10px;
            background-color: #a1f5af;
            border-radius: 3px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px; /* ê¸€ì í¬ê¸° ì¡°ì • */
            width: 50%; /* í¬ê¸° ë™ì¼í•˜ê²Œ ì„¤ì • */
            text-align: center; /* í…ìŠ¤íŠ¸ ì¤‘ì•™ ì •ë ¬ */
            display: flex;
            justify-content: center; /* ë²„íŠ¼ ë‚´ìš© ì¤‘ì•™ ì •ë ¬ */
            align-items: center; /* ë²„íŠ¼ ë‚´ìš© ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
        }
        .material-info-container {
            
            display: none;
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            width: 250px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            z-index: 3;  /* ë‹¤ë¥¸ ìš”ì†Œë“¤ë³´ë‹¤ ìœ„ì— í‘œì‹œë˜ë„ë¡ z-index ì„¤ì • */
        }
        .material-info-container.show {
            display: block;
        }
        .close-info {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: red;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }
        select {
            padding: 10px;
            font-size: 16px;
            margin-top: 10px;
            width: 100%;
            border-radius: 10px;
        }
        .total-info {
            margin-top: 80px;
            color: rgb(5, 5, 5);
            font-size: 16px;
        }
        .reset-button {
            margin-top: 10px;
            padding: 5px 10px;
            background-color: #df4b23;
            border-radius: 3px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            width: 50%;
            border: 2px solid #df4b23; /* í…Œë‘ë¦¬ ìƒ‰ìƒ ë³€ê²½ */
        }
        
        .buttons-container {
            display: flex;
            justify-content: space-between;
            
        }

        .successcount20 {
            position: absolute;
            left: 0px;
            
            font-size: 16px;
            color: #000000;
            margin-top: 25px;
            
            background-color: rgba(250, 245, 245, 0.5); /* ë°˜íˆ¬ëª… ê²€ì •ìƒ‰ ë°°ê²½ */
            border-radius: 5px; /* ëª¨ì„œë¦¬ ë‘¥ê¸€ê²Œ */
            text-align: center; /* í…ìŠ¤íŠ¸ ì¤‘ì•™ ì •ë ¬ */
        }

        .successcount20 div {
            margin: 5px 0;
        }

        .successcount20 span {
            color: #000000; /* ì„±ê³µ íšŸìˆ˜, ì‹¤íŒ¨ íšŸìˆ˜ì˜ í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
            font-size: 18px; /* ìˆ«ì í¬ê¸° */
        }
        .name {
            position: absolute;
            left: 50%;
            top: 13px;
            font-size: 10px;
            color: #ffffff;
            transform: translate(-50%, -50%); /* ì¤‘ì•™ ì •ë ¬ ë³´ì • */
            
          
            border-radius: 5px; /* ëª¨ì„œë¦¬ ë‘¥ê¸€ê²Œ */
            text-align: center; /* í…ìŠ¤íŠ¸ ì¤‘ì•™ ì •ë ¬ */

           



        }
        .round-btn {
            margin-top: 10px;
            padding: 5px 10px;
            background-color: #586359; /* ë²„íŠ¼ ë°°ê²½ìƒ‰ */
            border: 2px solid #586359; /* ë²„íŠ¼ í…Œë‘ë¦¬ ìƒ‰ìƒë„ ë°°ê²½ìƒ‰ê³¼ ë™ì¼í•˜ê²Œ */
            border-radius: 3px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px; /* ê¸€ì í¬ê¸° ì¡°ì • */
            width: 50%; /* í¬ê¸° ë™ì¼í•˜ê²Œ ì„¤ì • */
            text-align: center; /* í…ìŠ¤íŠ¸ ì¤‘ì•™ ì •ë ¬ */
            display: flex;
            justify-content: center; /* ë²„íŠ¼ ë‚´ìš© ì¤‘ì•™ ì •ë ¬ */
            align-items: center; /* ë²„íŠ¼ ë‚´ìš© ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
        }
        
        .round-btn img {
            width: 20px;
            margin-right: 5px;
        }
        
        .round-btn span {
            font-size: 14px;
        }
        
        #enhance-all-100-button {
    white-space: nowrap;
}




    </style>
</head>
<body>
    <div class="container">
        <div class="content">
            <div class="top-section">
                <div class="container">
                    <img src="mm.png" class="item-img" alt="ì•„ì´í…œ ì´ë¯¸ì§€">
                    <img src="mma.png" class="mma-img" alt="ì•„ì´í…œ ì´ë¯¸ì§€">
                </div>
                <div class="name">ì‚¬ë… ê°•í™” ë ˆë²¨ë³„ ì‹¤íŒ¨ íšŸìˆ˜</div>
                <div class="successcount20" id="failure-counts">
                    <div>Lv.0: <span id="fail-0">0</span>íšŒ ì‹¤íŒ¨</div>
                    <div>Lv.1: <span id="fail-1">0</span>íšŒ ì‹¤íŒ¨</div>
                    <div>Lv.2: <span id="fail-2">0</span>íšŒ ì‹¤íŒ¨</div>
                    <div>Lv.3: <span id="fail-3">0</span>íšŒ ì‹¤íŒ¨</div>
                    <div>Lv.4: <span id="fail-4">0</span>íšŒ ì‹¤íŒ¨</div>
                    <div>Lv.5: <span id="fail-5">0</span>íšŒ ì‹¤íŒ¨</div>
                    <div>Lv.6: <span id="fail-6">0</span>íšŒ ì‹¤íŒ¨</div>
                    <div>Lv.7: <span id="fail-7">0</span>íšŒ ì‹¤íŒ¨</div>
                    <div>Lv.8: <span id="fail-8">0</span>íšŒ ì‹¤íŒ¨</div>
                    <div>Lv.9: <span id="fail-9">0</span>íšŒ ì‹¤íŒ¨</div>
                    <div>Lv.10: <span id="fail-10">0</span>íšŒ ì‹¤íŒ¨</div>
                    <div>Lv.11: <span id="fail-11">0</span>íšŒ ì‹¤íŒ¨</div>
                    <div>Lv.12: <span id="fail-12">0</span>íšŒ ì‹¤íŒ¨</div>
                    <div>Lv.13: <span id="fail-13">0</span>íšŒ ì‹¤íŒ¨</div>
                    <div>Lv.14: <span id="fail-14">0</span>íšŒ ì‹¤íŒ¨</div>
                </div>
                <div class="item-info">
                    
                    <p>Lv. <span id="item-level">0</span> ì‚¬ë…</p>
                    <div class="material-info">
                        <div><img src="gold-icon.png" alt="ê³¨ë“œ ì•„ì´ì½˜"> <span id="gold-amount">0</span></div>
                        <div><img src="soulstone.png" alt="ì‚¬ë…ì„ ì•„ì´ì½˜"> <span id="soulstone-amount">0</span></div>
                        <div style="display: none;">
                            <img src="dia.png" alt="ë‹¤ì´ì•„ ì•„ì´ì½˜">
                            <span id="diamond-amount">0</span>
                        </div> </div>
                    
                </div>
                <select id="level-select">
                    <option value="0">Lv.0</option>
                    <option value="1">Lv.1</option>
                    <option value="2">Lv.2</option>
                    <option value="3">Lv.3</option>
                    <option value="4">Lv.4</option>
                    <option value="5">Lv.5</option>
                    <option value="6">Lv.6</option>
                    <option value="7">Lv.7</option>
                    <option value="8">Lv.8</option>
                    <option value="9">Lv.9</option>
                    <option value="10">Lv.10</option>
                    <option value="11">Lv.11</option>
                    <option value="12">Lv.12</option>
                    <option value="13">Lv.13</option>
                    <option value="14">Lv.14</option>
                    <option value="15">Lv.15</option>
                </select>
            </div>
            <div class="buttons-container">
                <button id="muteButton">
                    <i class="fa fa-volume-up" id="speakerIcon"></i> <!-- ê¸°ë³¸ ì†Œë¦¬ ì¼¬ ì•„ì´ì½˜ -->
                </button>
                <button class="button" id="enhance-button">ê°•í™” (í™•ë¥ : 90%)</button>
                <button class="button" id="enhance-all-button">í•œ ë²ˆì— ê°•í™”í•˜ê¸°</button>
                <button class="button" id="enhance-all-100-button">100ë²ˆ&nbsp;ì‹œë„</button>
 </div>
            <div class="log" id="log"></div>
            <div class="total-info">
                <p id="total-gold">ì´ ê³¨ë“œ ì‚¬ìš©ëŸ‰: 0</p>
                <p id="total-soulstone">ì´ ì‚¬ë…ì„ ì‚¬ìš©ëŸ‰: 0</p>
                <p id="total-diamond">ì´ ë‹¤ì´ì•„ ì‚¬ìš©ëŸ‰: 0</p>
            </div>
            <div class="successcount">
                <div>ì„±ê³µ íšŸìˆ˜: <span id="success-count">0</span></div>
                <div>ì‹¤íŒ¨ íšŸìˆ˜: <span id="failure-count">0</span></div>

            </div>
          
            <div class="buttons-container">
                <button class="round-btn" id="home-btn" onclick="navigate('index.html')"> 
                    <img src="https://github.com/SaeDing/ABCD123123AAA/blob/main/A.PNG?raw=true" alt="B">
                    <span>í™ˆ</span>
                </button>
                <div class="material-info-button" id="material-info-btn">ì¬ë£Œ ì •ë³´</div>
                <button class="reset-button" id="reset-button">ì´ˆê¸°í™”</button>
                <!-- í™ˆ ë²„íŠ¼ ì¶”ê°€ -->


            </div>
            <div class="material-info-container" id="material-info-container">
                <button class="close-info" id="close-info">X</button>
                <p>Lv0: 13000 ì‚¬ë…ì„ 15ê°œ (90%)</p>
                <p>Lv1: 14000 ì‚¬ë…ì„ 15ê°œ (80%)</p>
                <p>Lv2: 15000 ì‚¬ë…ì„ 20ê°œ (70%)</p>
                <p>Lv3: 16000 ì‚¬ë…ì„ 20ê°œ (60%)</p>
                <p>Lv4: 17000 ì‚¬ë…ì„ 25ê°œ (50%)</p>
                <p>Lv5: 18000 ì‚¬ë…ì„ 25ê°œ (46%)</p>
                <p>Lv6: 19000 ì‚¬ë…ì„ 30ê°œ (42%)</p>
                <p>Lv7: 20000 ì‚¬ë…ì„ 30ê°œ (38%)</p>
                <p>Lv8: 21000 ì‚¬ë…ì„ 35ê°œ (34%)</p>
                <p>Lv9: 22000 ì‚¬ë…ì„ 35ê°œ (30%)</p>
                <p>Lv10: 23000 ì‚¬ë…ì„ 40ê°œ (26%)</p>
                <p>Lv11: 24000 ì‚¬ë…ì„ 40ê°œ (22%)</p>
                <p>Lv12: 25000 ì‚¬ë…ì„ 45ê°œ (18%)</p>
                <p>Lv13: 26000 ì‚¬ë…ì„ 45ê°œ (14%)</p>
                <p>Lv14: 27000 ì‚¬ë…ì„ 50ê°œ (10%)</p>
                <p>Lv15: MAX</p>
            </div>
        </div>
    </div>
    <script>

        let isMuted = false; // ì†Œë¦¬ ë„ê¸° ìƒíƒœë¥¼ ì¶”ì í•˜ëŠ” ë³€ìˆ˜

        function simulateEnhancementOnce(initialLevel) {
    // ì„ íƒëœ ì´ˆê¸° ë ˆë²¨ë¡œ ì‹œì‘ (ì˜ˆ: level-selectê°€ 13ì´ë©´ 13ë¶€í„° ì‹œì‘)
    let localCurrentLevel = initialLevel;
    let localGoldUsed = 0;
    let localSoulstoneUsed = 0;
    let localSuccessCount = 0;
    let localFailureCount = 0;

    // ì„ íƒëœ ë ˆë²¨ë¶€í„° Lv.15ê¹Œì§€ ê°•í™” ì‹œë®¬ë ˆì´ì…˜ ì§„í–‰
    for (let i = localCurrentLevel; i < 15; i++) {
        let success = false;
        while (!success) {
            // i ë ˆë²¨ì—ì„œ ê°•í™” ì„±ê³µ ì—¬ë¶€ íŒì •
            success = Math.random() * 100 < probabilities[i];
            if (success) {
                localCurrentLevel = i + 1; // ì„±ê³µ ì‹œ ë‹¤ìŒ ë ˆë²¨ë¡œ ì´ë™
                localSuccessCount++;       // ì„±ê³µ íšŸìˆ˜ ì¦ê°€
            } else {
                localFailureCount++;       // ì‹¤íŒ¨ íšŸìˆ˜ ì¦ê°€
            }
            // í•´ë‹¹ ë ˆë²¨ ì‹œë„ë§ˆë‹¤ ì†Œëª¨ ì¬í™” ëˆ„ì 
            localSoulstoneUsed += soulstoneRequired[i];
            localGoldUsed += goldRequired[i];
        }
    }
    
    // ë‹¤ì´ì•„ ì‚¬ìš©ëŸ‰ ê³„ì‚° (ì‚¬ë…ì„ ì‚¬ìš©ëŸ‰ì— 100ì„ ê³±í•¨)
    let localDiamondUsed = localSoulstoneUsed * 100;
    // ë‹¤ì´ì•„ë¥¼ 480ìœ¼ë¡œ ë‚˜ëˆ„ì–´ 'í’€ë””' íŒ ìˆ˜ ê³„ì‚° (ì†Œìˆ˜ì  ë²„ë¦¼)
    let localFullDiCount = Math.floor(localDiamondUsed / 480);
    
    // ê²°ê³¼ë¥¼ ê°ì²´ë¡œ ë°˜í™˜
    return {
        goldUsed: localGoldUsed,
        soulstoneUsed: localSoulstoneUsed,
        diamondUsed: localDiamondUsed,
        fullDiCount: localFullDiCount,
        successCount: localSuccessCount,
        failureCount: localFailureCount
    };
}

const enhanceAll100Button = document.getElementById("enhance-all-100-button");
enhanceAll100Button.addEventListener("click", () => {
    // level-selectì—ì„œ ì„ íƒí•œ ì´ˆê¸° ë ˆë²¨ ê°’ì„ ì •ìˆ˜ë¡œ ë³€í™˜
    let initialLevel = parseInt(levelSelect.value);
    
    // 15ë ˆë²¨ì´ë©´ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ
    if (initialLevel === 15) {
        return;  // 15ë ˆë²¨ì¸ ê²½ìš° ì•„ë¬´ ì‘ì—…ë„ ìˆ˜í–‰í•˜ì§€ ì•ŠìŒ.
    }
    
    // ë²„íŠ¼ í´ë¦­ ì‹œ ë¡œê·¸ ì˜ì—­ ì´ˆê¸°í™”
    log.innerHTML = "";

    // 100ë²ˆ ì‹¤í–‰ì„ ìœ„í•œ í•©ê³„ ë³€ìˆ˜ ì´ˆê¸°í™”
    let totalGoldSum = 0;
    let totalSoulstoneSum = 0;
    let totalSuccessSum = 0;
    let totalFailureSum = 0;
    const simulationRuns = 100; // ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰ íšŸìˆ˜
    
    // ê° ì‹œë®¬ë ˆì´ì…˜ì˜ ì‚¬ë…ì„ ì‚¬ìš©ëŸ‰ì„ ì €ì¥í•  ë°°ì—´
    let soulstoneArray = [];
    
    // 100ë²ˆ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰
    for (let run = 0; run < simulationRuns; run++) {
        const result = simulateEnhancementOnce(initialLevel);
        totalGoldSum += result.goldUsed;
        totalSoulstoneSum += result.soulstoneUsed;
        totalSuccessSum += result.successCount;
        totalFailureSum += result.failureCount;
        soulstoneArray.push(result.soulstoneUsed);
    }
    
    // í‰ê·  ê³„ì‚° (ë°˜ì˜¬ë¦¼í•˜ì—¬ ì •ìˆ˜ë¡œ í‘œì‹œ)
    const avgGold = Math.round(totalGoldSum / simulationRuns);
    const avgSoulstone = Math.round(totalSoulstoneSum / simulationRuns);
    // ë‹¤ì´ì•„ ì‚¬ìš©ëŸ‰ì€ í‰ê·  ì‚¬ë…ì„ ì‚¬ìš©ëŸ‰ì— 100ì„ ê³±í•œ ê°’
    const avgDiamond = avgSoulstone * 100;
    const avgFullDiCount = Math.floor(avgDiamond / 480);
    const avgSuccess = (totalSuccessSum / simulationRuns).toFixed(2);
    const avgFailure = (totalFailureSum / simulationRuns).toFixed(2);
    
    // ìµœì €/ìµœê³  ì‚¬ë…ì„ ì‚¬ìš©ëŸ‰ (ë‹¤ì´ì•„ë¡œ í™˜ì‚°í•˜ë ¤ë©´ Ã—100)
    const minSoulstone = Math.min(...soulstoneArray);
    const maxSoulstone = Math.max(...soulstoneArray);
    const minDiamond = minSoulstone * 100;
    const maxDiamond = maxSoulstone * 100;
    
    // ë¡œê·¸ ì˜ì—­ì— ê²°ê³¼ ì¶œë ¥
    log.innerHTML += `<p>100ë²ˆ í‰ê·  ê²°ê³¼ (ì‹œì‘ ë ˆë²¨: ${initialLevel}):</p>`;
    log.innerHTML += `<p>í‰ê·  ê³¨ë“œ ì‚¬ìš©ëŸ‰: ${formatNumber(avgGold)}</p>`;
    log.innerHTML += `<p>í‰ê·  ì‚¬ë…ì„ ì‚¬ìš©ëŸ‰: ${formatNumber(avgSoulstone)}</p>`;
    log.innerHTML += `<p>ì„±ê³µ íšŸìˆ˜: ${avgSuccess} / ì‹¤íŒ¨ íšŸìˆ˜: ${avgFailure}</p>`;
    log.innerHTML += `<p>ìµœì € ë‹¤ì´ì•„ ì‚¬ìš©ëŸ‰ (ë‹¤ì´ì•„): ${formatNumber(minDiamond)}</p>`;
    log.innerHTML += `<p>í‰ê·  ë‹¤ì´ì•„ ì‚¬ìš©ëŸ‰: ${formatNumber(avgDiamond)} í’€ë”” ${formatNumber(avgFullDiCount)}íŒ</p>`;
    log.innerHTML += `<p>ìµœê³  ë‹¤ì´ì•„ ì‚¬ìš©ëŸ‰ (ë‹¤ì´ì•„): ${formatNumber(maxDiamond)}</p>`;
    log.scrollTop = log.scrollHeight;
    playAudio();
});



        // ì†Œë¦¬ ì¬ìƒ í•¨ìˆ˜
        function playAudio() {
            const audio = new Audio('11.ogg');
            audio.volume = isMuted ? 0 : 0.05; // mute ìƒíƒœì— ë”°ë¼ ë³¼ë¥¨ ì„¤ì •
            audio.play(); // ì˜¤ë””ì˜¤ ì¬ìƒ
        }
    
        function playAudio1() {
            const audio1 = new Audio('22.ogg');
            audio1.volume = isMuted ? 0 : 0.05; // mute ìƒíƒœì— ë”°ë¼ ë³¼ë¥¨ ì„¤ì •
            audio1.play(); // ì˜¤ë””ì˜¤ ì¬ìƒ
        }

        const enhanceButton = document.getElementById("enhance-button");
        const enhanceAllButton = document.getElementById("enhance-all-button");
        const resetButton = document.getElementById("reset-button");
        const itemLevel = document.getElementById("item-level");
        const log = document.getElementById("log");
        const materialInfoContainer = document.getElementById("material-info-container");
        const materialInfoBtn = document.getElementById("material-info-btn");
        const closeInfo = document.getElementById("close-info");
        const totalGold = document.getElementById("total-gold");
        const totalSoulstone = document.getElementById("total-soulstone");
        const levelSelect = document.getElementById("level-select");
    
        // í˜„ì¬ ë ˆë²¨ë³„ ì¬ë£Œ ì •ë³´
        const goldAmount = document.getElementById("gold-amount");
        const soulstoneAmount = document.getElementById("soulstone-amount");
        const diamondAmount = document.getElementById("diamond-amount");
    
        // ì´ ì‚¬ìš©ëŸ‰ ê´€ë ¨ ìš”ì†Œ
        const totalGoldUsedText = document.getElementById("total-gold");
        const totalSoulstoneUsedText = document.getElementById("total-soulstone");
        const totalDiamondUsedText = document.getElementById("total-diamond");
        let failureCounts = Array(15).fill(0); // ê° ë ˆë²¨ë³„ ì‹¤íŒ¨ íšŸìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” ë°°ì—´
        let totalGoldUsed = 0;      // ì´ ê³¨ë“œ ì‚¬ìš©ëŸ‰
        let totalSoulstoneUsed = 0; // ì´ ì‚¬ë…ì„ ì‚¬ìš©ëŸ‰
    
        const probabilities = [
            90, 80, 70, 60, 50, 46, 42, 38, 34, 30, 26, 22, 18, 14, 10,0
        ];
        const soulstoneRequired = [
            15, 15, 20, 20, 25, 25, 30, 30, 35, 35, 40, 40, 45, 45, 50,50
        ];
        const goldRequired = [
            13000, 14000, 15000, 16000, 17000, 18000, 19000, 20000, 21000, 22000, 23000, 24000, 25000, 26000, 27000,27000
        ];
    
        let currentLevel = 0;
        let soulstoneUsed = 0;
        let goldUsed = 0;
        let successCount = 0;
        let failureCount = 0;
    
        function formatNumber(num) {
            return num.toLocaleString(); // ìˆ«ìì— ì½¤ë§ˆ ì¶”ê°€
        }
    
        function updateUI() {
    // í˜„ì¬ ë ˆë²¨ì´ 15ì¼ ê²½ìš° undefined ë°©ì§€ (NaN ë°©ì§€)
    const currentGold = currentLevel < 15 ? goldRequired[currentLevel] : 0;
    const currentSoulstone = currentLevel < 15 ? soulstoneRequired[currentLevel] : 0;

    // ë‹¤ì´ì•„ ì‚¬ìš©ëŸ‰ ê³„ì‚°
    const totalDiamond = soulstoneUsed * 100;
    const fullDiCount = Math.floor(totalDiamond / 480);

    // í˜„ì¬ ë ˆë²¨ í‘œì‹œ
    itemLevel.textContent = currentLevel;

    // Lv.15ì¼ ê²½ìš° ê³¨ë“œ/ì‚¬ë…ì„ ê°’ ìˆ¨ê¹€
    document.getElementById("gold-amount").textContent = currentLevel < 15 ? formatNumber(currentGold) : "";
    document.getElementById("soulstone-amount").textContent = currentLevel < 15 ? formatNumber(currentSoulstone) : "";
    document.getElementById("diamond-amount").textContent = currentLevel < 15 ? formatNumber(totalDiamond) : "";

    // ì´ ì‚¬ìš©ëŸ‰ ì—…ë°ì´íŠ¸
    totalGold.textContent = `ì´ ê³¨ë“œ ì‚¬ìš©ëŸ‰: ${formatNumber(goldUsed)}`;
    totalSoulstone.textContent = `ì´ ì‚¬ë…ì„ ì‚¬ìš©ëŸ‰: ${formatNumber(soulstoneUsed)}`;
    document.getElementById("total-diamond").textContent = `ì´ ë‹¤ì´ì•„ ì‚¬ìš©ëŸ‰: ${formatNumber(totalDiamond)} í’€ë”” ${fullDiCount}íŒ`;

    // ì„±ê³µ, ì‹¤íŒ¨ íšŸìˆ˜ ì—…ë°ì´íŠ¸
    document.getElementById("success-count").textContent = successCount;
    document.getElementById("failure-count").textContent = failureCount;

    // ë ˆë²¨ë³„ ì‹¤íŒ¨ íšŸìˆ˜ í‘œì‹œ
    let failureText = "";
    for (let i = 0; i < 15; i++) {
        failureText += `Lv.${String(i + 1).padStart(2, '0')}(${failureCounts[i]})`;
        if ((i + 1) % 5 === 0) {
            failureText += "\n";
        } else {
            failureText += " | ";
        }
    }
    document.getElementById("failure-counts").textContent = failureText.trim();

    // ê°•í™” ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
    // innerHTMLì„ ì‚¬ìš©í•´ì„œ <br> íƒœê·¸ë¡œ ì¤„ë°”ê¿ˆì„ ì ìš©
    enhanceButton.innerHTML = currentLevel === 15 ? "Lv.MAX" : `ê°•í™”<br>(í™•ë¥ : ${probabilities[currentLevel]}%)`;

    // Max ë ˆë²¨ì´ë©´ ë²„íŠ¼ ë¹„í™œì„±í™”
    enhanceButton.disabled = currentLevel === 15;
    enhanceAllButton.disabled = currentLevel === 15;
}

    
        enhanceButton.addEventListener("click", () => {
            playAudio();
            if (currentLevel < 15) {
                const success = Math.random() * 100 < probabilities[currentLevel];
                log.innerHTML += `<p>Lv.${currentLevel} ê°•í™” ${success ? 'ì„±ê³µ! ğŸ‰' : 'ì‹¤íŒ¨! ğŸ˜¢'}</p>`;
    
                if (success) {
                    currentLevel++;
                    successCount++;
                    enhanceButton.classList.add("success"); // ì„±ê³µ ì‹œ ë°˜ì§ì„ ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€
                    setTimeout(() => {
                        enhanceButton.classList.remove("success");
                    }, 1000); // ë°˜ì§ì„ ì• ë‹ˆë©”ì´ì…˜ ì§€ì† ì‹œê°„
                } else {
                    playAudio1();
                    failureCounts[currentLevel]++; // í˜„ì¬ ë ˆë²¨ì˜ ì‹¤íŒ¨ íšŸìˆ˜ ì¦ê°€
                    failureCount++; // ì „ì²´ ì‹¤íŒ¨ íšŸìˆ˜ ì¦ê°€
                    enhanceButton.classList.add("failure"); // ì‹¤íŒ¨ ì‹œ í”ë“¤ë¦¼ ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€
                    setTimeout(() => {
                        enhanceButton.classList.remove("failure"); // ì• ë‹ˆë©”ì´ì…˜ ëë‚œ í›„ failure í´ë˜ìŠ¤ ì œê±°
                    }, 500); // í”ë“¤ë¦¼ ì• ë‹ˆë©”ì´ì…˜ ì§€ì† ì‹œê°„ (0.5ì´ˆ)
                }
    
                soulstoneUsed += soulstoneRequired[currentLevel];
                goldUsed += goldRequired[currentLevel];
                updateUI();
                log.scrollTop = log.scrollHeight;
            }
        });
        enhanceAllButton.addEventListener("click", () => {
            playAudio();
            for (let i = currentLevel; i < 15; i++) {
                let success = false;
                while (!success) {
                    success = Math.random() * 100 < probabilities[i];
                    log.innerHTML += `<p>Lv.${i} ê°•í™” ${success ? 'ì„±ê³µ! ğŸ‰' : 'ì‹¤íŒ¨! ğŸ˜¢'}</p>`;
                    if (success) {
                        currentLevel = i + 1; // ì„±ê³µ ì‹œ ë ˆë²¨ì„ ì—…ë°ì´íŠ¸
                        successCount++; // ì„±ê³µ íšŸìˆ˜ ì¦ê°€
                    } else {
                        failureCounts[i]++; // ì‹¤íŒ¨ íšŸìˆ˜ ì¦ê°€
                        failureCount++; // ì „ì²´ ì‹¤íŒ¨ íšŸìˆ˜ ì¦ê°€
                    }
                    soulstoneUsed += soulstoneRequired[i];
                    goldUsed += goldRequired[i];
                }
            }
            // Force level to 15 if it's not already at max
            currentLevel = 15;

            // âŒ ë¶ˆí•„ìš”í•œ ì¤‘ë³µ ì¬í™” ì œê±°
            // soulstoneUsed += soulstoneRequired[14];
            // goldUsed += goldRequired[14];

            updateUI(); // Update UI with new values
            log.scrollTop = log.scrollHeight;
        });

    
        // ì´ˆê¸°í™” ë²„íŠ¼ ì´ë²¤íŠ¸
        resetButton.addEventListener("click", () => {
            // ì´ˆê¸°í™” ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œ currentLevelì„ levelSelectì˜ ì„ íƒëœ ê°’ìœ¼ë¡œ ì„¤ì •
            currentLevel = parseInt(levelSelect.value);
            failureCounts.fill(0); // ëª¨ë“  ë ˆë²¨ì˜ ì‹¤íŒ¨ íšŸìˆ˜ ì´ˆê¸°í™”
            soulstoneUsed = 0;
            goldUsed = 0;
            log.innerHTML = '';
            successCount = 0;
            failureCount = 0;
            updateUI();
        });
    
        levelSelect.addEventListener("change", () => {
            currentLevel = parseInt(levelSelect.value);
            soulstoneUsed = 0;
            goldUsed = 0;
            log.innerHTML = '';
            successCount = 0;
            failureCount = 0;
            updateUI();
        });
    
        materialInfoBtn.addEventListener("click", () => {
            materialInfoContainer.classList.toggle("show");
        });
    
        closeInfo.addEventListener("click", () => {
            materialInfoContainer.classList.remove("show");
        });
    
        materialInfoBtn.addEventListener("click", () => {
            materialInfoContainer.classList.toggle("show");
        });
    
        closeInfo.addEventListener("click", () => {
            materialInfoContainer.classList.remove("show");
        });
         // ì†Œë¦¬ ë„ê¸°/ì¼œê¸° ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
     document.getElementById('muteButton').addEventListener('click', () => {
        isMuted = !isMuted; // mute ìƒíƒœë¥¼ í† ê¸€
        const speakerIcon = document.getElementById('speakerIcon');
        
        if (isMuted) {
            speakerIcon.classList.remove('fa-volume-up');  // ì†Œë¦¬ ì¼¬ ì•„ì´ì½˜ ì œê±°
            speakerIcon.classList.add('fa-volume-mute');   // ì†Œë¦¬ ë” ì•„ì´ì½˜ ì¶”ê°€
        } else {
            speakerIcon.classList.remove('fa-volume-mute'); // ì†Œë¦¬ ë” ì•„ì´ì½˜ ì œê±°
            speakerIcon.classList.add('fa-volume-up');      // ì†Œë¦¬ ì¼¬ ì•„ì´ì½˜ ì¶”ê°€
        }
    });
        materialInfoBtn.addEventListener("click", () => {
            materialInfoContainer.classList.toggle("show");
        });
    
        closeInfo.addEventListener("click", () => {
            materialInfoContainer.classList.remove("show");
        });
    
        updateUI();

        function navigate(url) {
            window.location.href = url;  // 'index.html' í˜ì´ì§€ë¡œ ì´ë™
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</body>
</html>
