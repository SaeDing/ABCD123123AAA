<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>골드 스킬 계산기</title>
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            text-align: center;
            background-color: #f8f9fa;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }
        h2 {
            color: #333;
        }
        label {
            display: block;
            font-weight: bold;
            margin-top: 10px;
            text-align: left;
        }
        .icon {
            width: 50px;
            height: 50px;
            margin-right: 8px;
        }
        select {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            font-size: 16px;
            border-radius: 12px;
            border: 1px solid #ccc;
            background: #ffffff;
            box-shadow: inset 2px 2px 5px rgba(0,0,0,0.1);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 8px;
            text-align: center;
            border-radius: 8px;
        }
        th {
            background-color: #007bff;
            color: white;
            border-radius: 12px 12px 0 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>골드 스킬 효율 계산기</h2>
        <label><img src="img/a11.png" alt="아이콘" class="icon"> 있는 마족이 더 버는 법 (라운드별 % 골드 증가 1-1)</label>
        <select id="skill2" onchange="updateTable()"></select>
        <label><img src="img/b11.png" alt="아이콘" class="icon"> 한 푼만 줍쇼! (라운드별 추가 골드 지급 1-2)</label>
        <select id="skill3" onchange="updateTable()"></select>
        <label><img src="img/c11.png" alt="아이콘" class="icon"> 아무도 모르게 (시작시 보유 동전 증가 1-3)</label>
        <select id="skill1" onchange="updateTable()"></select>
        <label><img src="img/e11.png" alt="아이콘" class="icon"> 아프니까 동전이다 (치명타 골드 획득 1-4)</label>
        <select id="skill5" onchange="updateTable()"></select>
        <label><img src="img/d11.png" alt="아이콘" class="icon"> 이 동전은 제 겁니다 (적 처치 시 추가 골드 획득 2-1)</label>
        <select id="skill4" onchange="updateTable()"></select>
        <table id="goldTable">
            <thead>
                <tr>
                    <th>Wave</th>
                    <th>골드</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <script>
        const skill1_values = [0, 50, 61, 72, 83, 94, 105, 116, 127, 138, 150, 160, 170, 180, 190, 200];
        const skill2_values = [0, 2.5, 3, 3.5, 4, 4.5, 5, 5.5, 6, 6.5, 7, 7.4, 7.8, 8.2, 8.6, 9];
        const skill3_values = [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17];
        const skill4_values = [2, 2.05, 2.1, 2.21, 2.2, 2.25, 2.3, 2.35, 2.4, 2.45, 2.5, 2.52, 2.54, 2.56, 2.58, 2.6];
        const skill5_values = [0, 2.5, 3, 3.5, 4, 4.5, 5, 5.5, 6, 6.5, 7, 7.4, 7.8, 8.2, 8.6, 9];
        
  
        function populateSelect(id, values) {
            let select = document.getElementById(id);
            select.innerHTML = "";
            values.forEach((value, i) => {
                let option = document.createElement("option");
                option.value = i;
                if (id === "skill2") {
                    option.text = `LV.${i.toString().padStart(2, '0')} (${value}%)`;
                } else {
                    option.text = `LV.${i.toString().padStart(2, '0')} (${value})`;
                }
                select.appendChild(option);
            });
        }
        
        window.onload = function() {
            populateSelect("skill2", skill2_values);
        }
        
        function updateTable() {
            let tableBody = document.getElementById("goldTable").getElementsByTagName("tbody")[0];
            tableBody.innerHTML = "";
            let skill1 = skill1_values[document.getElementById("skill1").value];
            let skill2 = skill2_values[document.getElementById("skill2").value];
            let skill3 = skill3_values[document.getElementById("skill3").value];
            let skill4 = skill4_values[document.getElementById("skill4").value];
            let skill5 = skill5_values[document.getElementById("skill5").value];
            let gold = (150 + skill1) * (1 + skill2 / 100);
            for (let wave = 0; wave <= 80; wave++) {
                if (wave > 0) {
                    let mobCount = (wave === 1) ? 110 : 40; // 1웨이브에는 몹이 70마리 추가되어 총 110마리
                    let critGold = mobCount * (((1 - (1 - (0.3 * (skill5 / 100)))**1) + (1 - (1 - (0.3 * (skill5 / 100)))**2) + (1 - (1 - (0.3 * (skill5 / 100)))**3)) / 3) * 2.5;
                    gold = gold * (1 + skill2 / 100) + 10 + skill3;
                    if (wave % 5 !== 0) {
                        gold += mobCount * skill4 + critGold;
                    }
                }
                let row = tableBody.insertRow();
                row.insertCell(0).innerText = wave;
                row.insertCell(1).innerText = Math.floor(gold);
            }
        }
        
        window.onload = function() {
            ["skill1", "skill2", "skill3", "skill4", "skill5"].forEach(id => populateSelect(id, eval(id + "_values")));
            updateTable();
        }

    </script>
</body>
</html>
