<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>골드 스킬 계산기</title>
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            text-align: center;
            background-color: #f8f9fa;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }
        h2 {
            color: #333;
            display: inline-block;
            margin-right: 20px;
        }
        label {
            display: block;
            font-weight: bold;
            margin-top: 10px;
            text-align: left;
        }
        .icon {
            width: 50px;
            height: 50px;
            margin-right: 8px;
        }
        select {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            font-size: 16px;
            border-radius: 12px;
            border: 1px solid #ccc;
            background: #ffffff;
            box-shadow: inset 2px 2px 5px rgba(0,0,0,0.1);
        }
    
        .btn-container {
            
            display: inline-block;
            margin-top: 20px;
        }
            .btn {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .btn:hover {
            background-color: #0056b3;
        }

        /* 수정된 표 디자인 */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
    
        table, th, td {
            border: 1px solid #e0e0e0;
        }
    
        th, td {
            padding: 16px 20px;
            text-align: center;
            font-size: 16px;
            border-radius: 8px;
            font-weight: 600;
        }
    
        th {
            background-color: #6c757d;
            color: white;
            border-radius: 12px 12px 0 0;
        }
    
        td {
            background-color: #fafafa;
            color: #333;
            transition: background-color 0.3s ease;
        }
    
        td:hover {
            background-color: #e9ecef; /* 마우스를 올렸을 때 배경색 변경 */
            cursor: pointer;
        }
    
        td.selected {
            background-color: #dbe2e8; /* 클릭 시 배경 색상 */
            font-weight: bold;
            color: #007bff; /* 클릭된 셀의 글자색 */
        }
    
        td.red {
            color: red;
            font-weight: bold;
        }
    
        /* 테이블에 마우스 오버 시 배경색 변경 */
        table tr:hover td {
            background-color: #e9f6ff;
        }
    
        /* 모바일 반응형 스타일 */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
    
            h2 {
                font-size: 28px;
            }
    
            label {
                font-size: 14px;
            }
    
            select {
                padding: 12px;
                font-size: 14px;
            }
    
            table th, td {
                font-size: 14px;
                padding: 12px 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>골드 스킬 효율 계산기</h2>
<!-- 버튼을 제목 오른쪽에 위치시키기 위해 inline-block을 사용 -->
        <div class="btn-container">
            <button class="btn" onclick="setSkills(15)">전부 15렙으로</button>
            <button class="btn" onclick="setSkills(10)">전부 10렙으로</button>
            <button class="btn" onclick="setSkills(0)">전부 0렙으로</button>
        </div>

        <label><img src="img/a11.png" alt="아이콘" class="icon"> 있는 마족이 더 버는 법 (라운드별 % 골드 증가 1-1)</label>
        <select id="skill2" onchange="updateTable()"></select>
        <label><img src="img/b11.png" alt="아이콘" class="icon"> 한 푼만 줍쇼! (라운드별 추가 골드 지급 1-2)</label>
        <select id="skill3" onchange="updateTable()"></select>
        <label><img src="img/c11.png" alt="아이콘" class="icon"> 아무도 모르게 (시작시 보유 동전 증가 1-3)</label>
        <select id="skill1" onchange="updateTable()"></select>
        <label><img src="img/e11.png" alt="아이콘" class="icon"> 아프니까 동전이다 (치명타 골드 획득 1-4)</label>
        <select id="skill5" onchange="updateTable()"></select>
        <label><img src="img/d11.png" alt="아이콘" class="icon"> 이 동전은 제 겁니다 (적 처치 시 추가 골드 획득 2-1)</label>
        <select id="skill4" onchange="updateTable()"></select>

         
        <div id="goldMarkers" style="margin-top: 20px; font-size: 16px; font-weight: bold;"></div>


<!-- 기존의 20만원을 넘어간 첫 웨이브 표시 부분 아래에 전후 웨이브 표시 추가 -->
<div id="firstWaveOver200K" style="margin-top: 20px; font-size: 16px; font-weight: bold;"></div>
<div id="previousAndNextWaves" style="margin-top: 20px; font-size: 14px; color: #555;"></div>


        <table id="goldTable">
            <thead>
                <tr>
                    <th>Wave</th>
                    <th>골드</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <script>

            const skill1_values = [0, 50, 61, 72, 83, 94, 105, 116, 127, 138, 150, 160, 170, 180, 190, 200];
            const skill2_values = [0, 2.5, 3, 3.5, 4, 4.5, 5, 5.5, 6, 6.5, 7, 7.4, 7.8, 8.2, 8.6, 9];
            const skill3_values = [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17];
            const skill4_values = [10, 10.05, 10.1, 10.21, 10.2, 10.25, 10.3, 10.35, 10.4, 10.45, 10.5, 10.52, 10.54, 10.56, 10.58, 10.6];
            const skill5_values = [0, 2.5, 3, 3.5, 4, 4.5, 5, 5.5, 6, 6.5, 7, 7.4, 7.8, 8.2, 8.6, 9];
        
            // 스킬 값을 셀렉트 박스에 채우는 함수
            function populateSelect(id, values) {
                let select = document.getElementById(id);
                select.innerHTML = "";
                values.forEach((value, i) => {
                    let option = document.createElement("option");
                                   option.value = i;
                if (id === "skill2") {
                    option.text = `LV.${i.toString().padStart(2, '0')} (${value}%)`;
                } else {
                    option.text = `LV.${i.toString().padStart(2, '0')} (${value})`;
                }
                    select.appendChild(option);
                });
            }
        
            window.onload = function() {
                ["skill1", "skill2", "skill3", "skill4", "skill5"].forEach(id => populateSelect(id, eval(id + "_values")));
                updateTable();
            }
        
            // 테이블 업데이트 함수
            function updateTable() {
                let tableBody = document.getElementById("goldTable").getElementsByTagName("tbody")[0];
                tableBody.innerHTML = "";
                let skill1 = skill1_values[document.getElementById("skill1").value];
                let skill2 = skill2_values[document.getElementById("skill2").value];
                let skill3 = skill3_values[document.getElementById("skill3").value];
                let skill4 = skill4_values[document.getElementById("skill4").value];
                let skill5 = skill5_values[document.getElementById("skill5").value];
                let gold = (150 + skill1) * (1 + skill2 / 100);
        
                let firstWaveOver200K = null; // 20만원 넘은 첫 웨이브를 추적할 변수
                let previousGold = null; // 이전 웨이브 골드
                let nextGold = null; // 다음 웨이브 골드
                let previousWaveGold = null; // 이전 웨이브의 골드를 추적하기 위한 변수
        
                let isOver200K = false;
        
                for (let wave = 0; wave <= 30; wave++) {
                    if (wave === 1) {
                        
                        let mobCount = (wave === 1) ? 50 : 50;
                        let critMultiplier = (wave < 21) ? 9 : 9;
                        let critGold = mobCount * (((1 - (1 - (0.6 * (skill5 / 100)))**3) + (1 - (1 - (0.6 * (skill5 / 100)))**5)) / 3) * critMultiplier;
        
                        
                        gold = gold * (1 + skill2 / 100) + skill3 + 10000;  // 1웨이브 계산 (5% 증가 + 추가 골드 + 10000)
                        

                        
                    }
        
                    if (wave > 1) {
                        let mobCount = (wave === 1) ? 50 : 50;
                        let critMultiplier = (wave < 21) ? 9 : 9;
                        let critGold = mobCount * (((1 - (1 - (0.9 * (skill5 / 100)))**3) + (1 - (1 - (0.9 * (skill5 / 100)))**5)) / 3) * critMultiplier;
        
                        gold = gold * (1 + skill2 / 100) + 200 + skill3;
                        if (wave % 5 !== 0) {
                            gold += mobCount * skill4 + critGold;
                        }
                    }


        
                    if (gold > 200000 && !isOver200K) {
                        firstWaveOver200K = { wave: wave, gold: gold };
                        isOver200K = true;
                    }
        
                    if (previousWaveGold !== null) {
                        previousGold = previousWaveGold;
                    }
        
                    previousWaveGold = Math.floor(gold).toLocaleString();
        
                    let row = tableBody.insertRow();
                    row.insertCell(0).innerText = wave;
        
                    let goldCell = row.insertCell(1);
                    goldCell.innerText = Math.floor(gold).toLocaleString();
                    if (gold > 200000) { 
                        goldCell.style.color = "red";
                    }
        
                    if (firstWaveOver200K && wave === firstWaveOver200K.wave + 1) {
                        nextGold = Math.floor(gold).toLocaleString();
                    }
                }
        
                // 첫 번째 20만원을 초과한 웨이브 표시
                if (firstWaveOver200K) {
                    let firstWaveElement = document.getElementById("firstWaveOver200K");
                    firstWaveElement.innerText = `20만원을 넘어간 첫 웨이브: 웨이브 ${firstWaveOver200K.wave} : ${Math.floor(firstWaveOver200K.gold).toLocaleString()} 골드`;
        
                    let previousAndNextElement = document.getElementById("previousAndNextWaves");
                    previousAndNextElement.innerText = `이전 웨이브 골드: 웨이브 ${firstWaveOver200K.wave - 1} : ${previousGold || 'N/A'} 골드, 현재 웨이브 골드: 웨이브 ${firstWaveOver200K.wave} : ${Math.floor(firstWaveOver200K.gold).toLocaleString()} 골드, 다음 웨이브 골드: 웨이브 ${firstWaveOver200K.wave + 1} : ${nextGold || 'N/A'} 골드`;
                } else {
                    let firstWaveElement = document.getElementById("firstWaveOver200K");
                    firstWaveElement.innerText = "20만원을 넘어간 웨이브가 없습니다.";
                    let previousAndNextElement = document.getElementById("previousAndNextWaves");
                    previousAndNextElement.innerText = "";
                }
        
                // 5, 10, 15, 20, 25 웨이브 골드 표시
                let goldMarkers = document.getElementById("goldMarkers");
                goldMarkers.innerHTML = `
                    5웨이브 골드: ${waveGolds[5] || 'N/A'}<br>
                    10웨이브 골드: ${waveGolds[10] || 'N/A'}<br>
                    15웨이브 골드: ${waveGolds[15] || 'N/A'}<br>
                    20웨이브 골드: ${waveGolds[20] || 'N/A'}<br>
                    25웨이브 골드: ${waveGolds[25] || 'N/A'}
                `;
            }
        
            // 클릭 시 셀 색상 변경 기능
            document.addEventListener("DOMContentLoaded", function() {
                const table = document.getElementById("goldTable");
        
                table.addEventListener("click", function(e) {
                    if (e.target && e.target.nodeName === "TD") {
                        e.target.classList.toggle("selected");
                    }
                });
            });
        
            // 스킬 값을 일괄 설정하는 함수
            function setSkills(level) {
                ["skill1", "skill2", "skill3", "skill4", "skill5"].forEach(id => {
                    document.getElementById(id).value = level;
                });
                updateTable();
        }

        
  
        
        window.onload = function() {
            ["skill1", "skill2", "skill3", "skill4", "skill5"].forEach(id => populateSelect(id, eval(id + "_values")));
            updateTable();
        }
    </script>
</body>



</html>
  